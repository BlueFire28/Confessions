!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Keymetrics=e()}}(function(){return function i(a,s,l){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(p)return p(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return u(a[t][1][e]||e)},r,r.exports,i,a,s,l)}return s[t].exports}for(var p="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(o,r,e){(function(e){"use strict";var t=o("./package.json"),n={services:{API:"https://app.keymetrics.io",OAUTH:"https://id.keymetrics.io"},OAUTH_AUTHORIZE_ENDPOINT:"/api/oauth/authorize",OAUTH_CLIENT_ID:"795984050",ENVIRONNEMENT:e&&e.versions&&e.versions.node?"node":"browser",VERSION:t.version,IS_DEBUG:"undefined"!=typeof window&&window.location.host.match(/km.(io|local)/)||void 0!==e&&"true"===e.env.DEBUG};r.exports=Object.assign({},n)}).call(this,o("_process"))},{"./package.json":36,_process:34}],2:[function(e,Jn,t){(function(Qn,Kn,$n){var e;e=this,function(e){"use strict";function h(e,t){t|=0;for(var n=Math.max(e.length-t,0),o=Array(n),r=0;r<n;r++)o[r]=e[t+r];return o}var t=function(t){var n=h(arguments,1);return function(){var e=h(arguments);return t.apply(null,n.concat(e))}},l=function(n){return function(){var e=h(arguments),t=e.pop();n.call(this,e,t)}};function r(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var n="function"==typeof $n&&$n,o="object"==typeof Qn&&"function"==typeof Qn.nextTick;function i(e){setTimeout(e,0)}function a(n){return function(e){var t=h(arguments,1);n(function(){e.apply(null,t)})}}var f=a(n?$n:o?Qn.nextTick:i);function s(o){return l(function(e,t){var n;try{n=o.apply(this,e)}catch(e){return t(e)}r(n)&&"function"==typeof n.then?n.then(function(e){u(t,null,e)},function(e){u(t,e.message?e:new Error(e))}):t(null,n)})}function u(e,t,n){try{e(t,n)}catch(e){f(p,e)}}function p(e){throw e}var c="function"==typeof Symbol;function d(e){return c&&"AsyncFunction"===e[Symbol.toStringTag]}function y(e){return d(e)?s(e):e}function m(r){return function(t){var e=h(arguments,1),n=l(function(n,e){var o=this;return r(t,function(e,t){y(e).apply(o,n.concat(t))},e)});return e.length?n.apply(this,e):n}}var v="object"==typeof Kn&&Kn&&Kn.Object===Object&&Kn,g="object"==typeof self&&self&&self.Object===Object&&self,b=v||g||Function("return this")(),k=b.Symbol,_=Object.prototype,w=_.hasOwnProperty,T=_.toString,j=k?k.toStringTag:void 0;var A=Object.prototype.toString;var E="[object Null]",S="[object Undefined]",x=k?k.toStringTag:void 0;function O(e){return null==e?void 0===e?S:E:x&&x in Object(e)?function(e){var t=w.call(e,j),n=e[j];try{var o=!(e[j]=void 0)}catch(e){}var r=T.call(e);return o&&(t?e[j]=n:delete e[j]),r}(e):(t=e,A.call(t));var t}var P="[object AsyncFunction]",L="[object Function]",C="[object GeneratorFunction]",z="[object Proxy]";var U=9007199254740991;function D(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=U}function I(e){return null!=e&&D(e.length)&&!function(e){if(!r(e))return!1;var t=O(e);return t==L||t==C||t==P||t==z}(e)}var R={};function B(){}function N(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}var q="function"==typeof Symbol&&Symbol.iterator,M=function(e){return q&&e[q]&&e[q]()};function F(e){return null!=e&&"object"==typeof e}function G(e){return F(e)&&"[object Arguments]"==O(e)}var H=Object.prototype,V=H.hasOwnProperty,W=H.propertyIsEnumerable,X=G(function(){return arguments}())?G:function(e){return F(e)&&V.call(e,"callee")&&!W.call(e,"callee")},Q=Array.isArray;var K="object"==typeof e&&e&&!e.nodeType&&e,$=K&&"object"==typeof Jn&&Jn&&!Jn.nodeType&&Jn,J=$&&$.exports===K?b.Buffer:void 0,Y=(J?J.isBuffer:void 0)||function(){return!1},Z=9007199254740991,ee=/^(?:0|[1-9]\d*)$/;var te={};te["[object Float32Array]"]=te["[object Float64Array]"]=te["[object Int8Array]"]=te["[object Int16Array]"]=te["[object Int32Array]"]=te["[object Uint8Array]"]=te["[object Uint8ClampedArray]"]=te["[object Uint16Array]"]=te["[object Uint32Array]"]=!0,te["[object Arguments]"]=te["[object Array]"]=te["[object ArrayBuffer]"]=te["[object Boolean]"]=te["[object DataView]"]=te["[object Date]"]=te["[object Error]"]=te["[object Function]"]=te["[object Map]"]=te["[object Number]"]=te["[object Object]"]=te["[object RegExp]"]=te["[object Set]"]=te["[object String]"]=te["[object WeakMap]"]=!1;var ne,oe="object"==typeof e&&e&&!e.nodeType&&e,re=oe&&"object"==typeof Jn&&Jn&&!Jn.nodeType&&Jn,ie=re&&re.exports===oe&&v.process,ae=function(){try{var e=re&&re.require&&re.require("util").types;return e||ie&&ie.binding&&ie.binding("util")}catch(e){}}(),se=ae&&ae.isTypedArray,le=se?(ne=se,function(e){return ne(e)}):function(e){return F(e)&&D(e.length)&&!!te[O(e)]},ue=Object.prototype.hasOwnProperty;function pe(e,t){var n,o,r,i=Q(e),a=!i&&X(e),s=!i&&!a&&Y(e),l=!i&&!a&&!s&&le(e),u=i||a||s||l,p=u?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],c=p.length;for(var d in e)!t&&!ue.call(e,d)||u&&("length"==d||s&&("offset"==d||"parent"==d)||l&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||(void 0,r=typeof(n=d),(o=null==(o=c)?Z:o)&&("number"==r||"symbol"!=r&&ee.test(n))&&-1<n&&n%1==0&&n<o))||p.push(d);return p}var ce=Object.prototype;var de,fe,me=(de=Object.keys,fe=Object,function(e){return de(fe(e))}),he=Object.prototype.hasOwnProperty;function ye(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||ce))return me(e);var t,n,o=[];for(var r in Object(e))he.call(e,r)&&"constructor"!=r&&o.push(r);return o}function ve(e){return I(e)?pe(e):ye(e)}function ge(e){if(I(e))return n=-1,o=(t=e).length,function(){return++n<o?{value:t[n],key:n}:null};var t,n,o,r,i,a,s,l,u,p=M(e);return p?(l=p,u=-1,function(){var e=l.next();return e.done?null:(u++,{value:e.value,key:u})}):(i=ve(r=e),a=-1,s=i.length,function(){var e=i[++a];return a<s?{value:r[e],key:e}:null})}function be(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function ke(u){return function(e,t,n){if(n=N(n||B),u<=0||!e)return n(null);var o=ge(e),r=!1,i=0,a=!1;function s(e,t){if(i-=1,e)r=!0,n(e);else{if(t===R||r&&i<=0)return r=!0,n(null);a||l()}}function l(){for(a=!0;i<u&&!r;){var e=o();if(null===e)return r=!0,void(i<=0&&n(null));i+=1,t(e.value,e.key,be(s))}a=!1}l()}}function _e(e,t,n,o){ke(t)(e,y(n),o)}function we(o,r){return function(e,t,n){return o(e,r,t,n)}}function Te(e,t,n){n=N(n||B);var o=0,r=0,i=e.length;function a(e,t){e?n(e):++r!==i&&t!==R||n(null)}for(0===i&&n(null);o<i;o++)t(e[o],o,be(a))}var je=we(_e,1/0),Ae=function(e,t,n){(I(e)?Te:je)(e,y(t),n)};function Ee(o){return function(e,t,n){return o(Ae,e,y(t),n)}}function Se(e,t,n,o){o=o||B,t=t||[];var r=[],i=0,a=y(n);e(t,function(e,t,n){var o=i++;a(e,function(e,t){r[o]=t,n(e)})},function(e){o(e,r)})}var xe=Ee(Se),Oe=m(xe);function Pe(r){return function(e,t,n,o){return r(ke(t),e,y(n),o)}}var Le=Pe(Se),Ce=we(Le,1),ze=m(Ce);function Ue(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n,e););return e}var De,Ie=function(e,t,n){for(var o=-1,r=Object(e),i=n(e),a=i.length;a--;){var s=i[De?a:++o];if(!1===t(r[s],s,r))break}return e};function Re(e,t){return e&&Ie(e,t,ve)}function Be(e){return e!=e}function Ne(e,t,n){return t==t?function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1}(e,t,n):function(e,t,n,o){for(var r=e.length,i=n+(o?1:-1);o?i--:++i<r;)if(t(e[i],i,e))return i;return-1}(e,Be,n)}var qe=function(i,e,r){"function"==typeof e&&(r=e,e=null),r=N(r||B);var n=ve(i).length;if(!n)return r(null);e||(e=n);var a={},s=0,l=!1,u=Object.create(null),o=[],p=[],c={};function d(e,t){o.push(function(){!function(o,e){if(l)return;var t=be(function(e,t){if(s--,2<arguments.length&&(t=h(arguments,1)),e){var n={};Re(a,function(e,t){n[t]=e}),n[o]=t,l=!0,u=Object.create(null),r(e,n)}else a[o]=t,Ue(u[o]||[],function(e){e()}),f()});s++;var n=y(e[e.length-1]);1<e.length?n(a,t):n(t)}(e,t)})}function f(){if(0===o.length&&0===s)return r(null,a);for(;o.length&&s<e;){o.shift()()}}function m(n){var o=[];return Re(i,function(e,t){Q(e)&&0<=Ne(e,n,0)&&o.push(t)}),o}Re(i,function(t,n){if(!Q(t))return d(n,[t]),void p.push(n);var o=t.slice(0,t.length-1),r=o.length;if(0===r)return d(n,t),void p.push(n);c[n]=r,Ue(o,function(e){if(!i[e])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+e+"` in "+o.join(", "));!function(e,t){var n=u[e];n||(n=u[e]=[]);n.push(t)}(e,function(){0===--r&&d(n,t)})})}),function(){var e,t=0;for(;p.length;)e=p.pop(),t++,Ue(m(e),function(e){0==--c[e]&&p.push(e)});if(t!==n)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),f()};function Me(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}var Fe="[object Symbol]";var Ge=1/0,He=k?k.prototype:void 0,Ve=He?He.toString:void 0;function We(e){if("string"==typeof e)return e;if(Q(e))return Me(e,We)+"";if("symbol"==typeof(t=e)||F(t)&&O(t)==Fe)return Ve?Ve.call(e):"";var t,n=e+"";return"0"==n&&1/e==-Ge?"-0":n}function Xe(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&o<=n?e:function(e,t,n){var o=-1,r=e.length;t<0&&(t=r<-t?0:r+t),(n=r<n?r:n)<0&&(n+=r),r=n<t?0:n-t>>>0,t>>>=0;for(var i=Array(r);++o<r;)i[o]=e[o+t];return i}(e,t,n)}var Qe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Ke="\\ud800-\\udfff",$e="["+Ke+"]",Je="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ye="\\ud83c[\\udffb-\\udfff]",Ze="[^"+Ke+"]",et="(?:\\ud83c[\\udde6-\\uddff]){2}",tt="[\\ud800-\\udbff][\\udc00-\\udfff]",nt="(?:"+Je+"|"+Ye+")"+"?",ot="[\\ufe0e\\ufe0f]?",rt=ot+nt+("(?:\\u200d(?:"+[Ze,et,tt].join("|")+")"+ot+nt+")*"),it="(?:"+[Ze+Je+"?",Je,et,tt,$e].join("|")+")",at=RegExp(Ye+"(?="+Ye+")|"+it+rt,"g");function st(e){return t=e,Qe.test(t)?e.match(at)||[]:e.split("");var t}var lt=/^\s+|\s+$/g;function ut(e,t,n){var o;if((e=null==(o=e)?"":We(o))&&(n||void 0===t))return e.replace(lt,"");if(!e||!(t=We(t)))return e;var r=st(e),i=st(t);return Xe(r,function(e,t){for(var n=-1,o=e.length;++n<o&&-1<Ne(t,e[n],0););return n}(r,i),function(e,t){for(var n=e.length;n--&&-1<Ne(t,e[n],0););return n}(r,i)+1).join("")}var pt=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,ct=/,/,dt=/(=.+)?(\s*)$/,ft=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function mt(e,t){var s={};Re(e,function(o,e){var r,t,n=d(o),i=!n&&1===o.length||n&&0===o.length;if(Q(o))r=o.slice(0,-1),o=o[o.length-1],s[e]=r.concat(0<r.length?a:o);else if(i)s[e]=o;else{if(r=t=(t=(t=(t=(t=o).toString().replace(ft,"")).match(pt)[2].replace(" ",""))?t.split(ct):[]).map(function(e){return ut(e.replace(dt,""))}),0===o.length&&!n&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");n||r.pop(),s[e]=r.concat(a)}function a(t,e){var n=Me(r,function(e){return t[e]});n.push(e),y(o).apply(null,n)}}),qe(s,t)}function ht(){this.head=this.tail=null,this.length=0}function yt(e,t){e.length=1,e.head=e.tail=t}function vt(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var a=y(e),s=0,l=[],u=!1;function o(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(d.started=!0,Q(e)||(e=[e]),0===e.length&&d.idle())return f(function(){d.drain()});for(var o=0,r=e.length;o<r;o++){var i={data:e[o],callback:n||B};t?d._tasks.unshift(i):d._tasks.push(i)}u||(u=!0,f(function(){u=!1,d.process()}))}function p(i){return function(e){s-=1;for(var t=0,n=i.length;t<n;t++){var o=i[t],r=Ne(l,o,0);0===r?l.shift():0<r&&l.splice(r,1),o.callback.apply(o,arguments),null!=e&&d.error(e,o.data)}s<=d.concurrency-d.buffer&&d.unsaturated(),d.idle()&&d.drain(),d.process()}}var c=!1,d={_tasks:new ht,concurrency:t,payload:n,saturated:B,unsaturated:B,buffer:t/4,empty:B,drain:B,error:B,started:!1,paused:!1,push:function(e,t){o(e,!1,t)},kill:function(){d.drain=B,d._tasks.empty()},unshift:function(e,t){o(e,!0,t)},remove:function(e){d._tasks.remove(e)},process:function(){if(!c){for(c=!0;!d.paused&&s<d.concurrency&&d._tasks.length;){var e=[],t=[],n=d._tasks.length;d.payload&&(n=Math.min(n,d.payload));for(var o=0;o<n;o++){var r=d._tasks.shift();e.push(r),l.push(r),t.push(r.data)}s+=1,0===d._tasks.length&&d.empty(),s===d.concurrency&&d.saturated();var i=be(p(e));a(t,i)}c=!1}},length:function(){return d._tasks.length},running:function(){return s},workersList:function(){return l},idle:function(){return d._tasks.length+s===0},pause:function(){d.paused=!0},resume:function(){!1!==d.paused&&(d.paused=!1,f(d.process))}};return d}function gt(e,t){return vt(e,1,t)}ht.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},ht.prototype.empty=function(){for(;this.head;)this.shift();return this},ht.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},ht.prototype.insertBefore=function(e,t){t.prev=e.prev,(t.next=e).prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},ht.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):yt(this,e)},ht.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):yt(this,e)},ht.prototype.shift=function(){return this.head&&this.removeLink(this.head)},ht.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},ht.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,n=0;n<this.length;n++)e[n]=t.data,t=t.next;return e},ht.prototype.remove=function(e){for(var t=this.head;t;){var n=t.next;e(t)&&this.removeLink(t),t=n}return this};var bt=we(_e,1);function kt(e,o,t,n){n=N(n||B);var r=y(t);bt(e,function(e,t,n){r(o,e,function(e,t){o=t,n(e)})},function(e){n(e,o)})}function _t(){var t=Me(arguments,y);return function(){var e=h(arguments),o=this,n=e[e.length-1];"function"==typeof n?e.pop():n=B,kt(t,e,function(e,t,n){t.apply(o,e.concat(function(e){var t=h(arguments,1);n(e,t)}))},function(e,t){n.apply(o,[e].concat(t))})}}var wt=function(){return _t.apply(null,h(arguments).reverse())},Tt=Array.prototype.concat,jt=function(e,t,n,r){r=r||B;var o=y(n);Le(e,t,function(e,t){o(e,function(e){return e?t(e):t(null,h(arguments,1))})},function(e,t){for(var n=[],o=0;o<t.length;o++)t[o]&&(n=Tt.apply(n,t[o]));return r(e,n)})},At=we(jt,1/0),Et=we(jt,1),St=function(){var e=h(arguments),t=[null].concat(e);return function(){return arguments[arguments.length-1].apply(this,t)}};function xt(e){return e}function Ot(s,l){return function(e,t,r,n){n=n||B;var i,a=!1;e(t,function(n,e,o){r(n,function(e,t){e?o(e):s(t)&&!i?(i=l(a=!0,n),o(null,R)):o()})},function(e){e?n(e):n(null,a?i:l(!1))})}}function Pt(e,t){return t}var Lt=Ee(Ot(xt,Pt)),Ct=Pe(Ot(xt,Pt)),zt=we(Ct,1);function Ut(n){return function(e){var t=h(arguments,1);t.push(function(e){var t=h(arguments,1);"object"==typeof console&&(e?console.error&&console.error(e):console[n]&&Ue(t,function(e){console[n](e)}))}),y(e).apply(null,t)}}var Dt=Ut("dir");function It(e,t,n){n=be(n||B);var o=y(e),r=y(t);function i(e){if(e)return n(e);var t=h(arguments,1);t.push(a),r.apply(this,t)}function a(e,t){return e?n(e):t?void o(i):n(null)}a(null,!0)}function Rt(e,n,o){o=be(o||B);var r=y(e),i=function(e){if(e)return o(e);var t=h(arguments,1);if(n.apply(this,t))return r(i);o.apply(null,[null].concat(t))};r(i)}function Bt(e,t,n){Rt(e,function(){return!t.apply(this,arguments)},n)}function Nt(e,t,n){n=be(n||B);var o=y(t),r=y(e);function i(e){if(e)return n(e);r(a)}function a(e,t){return e?n(e):t?void o(i):n(null)}r(a)}function qt(o){return function(e,t,n){return o(e,n)}}function Mt(e,t,n){Ae(e,qt(y(t)),n)}function Ft(e,t,n,o){ke(t)(e,qt(y(n)),o)}var Gt=we(Ft,1);function Ht(o){return d(o)?o:l(function(e,t){var n=!0;e.push(function(){var e=arguments;n?f(function(){t.apply(null,e)}):t.apply(null,e)}),o.apply(this,e),n=!1})}function Vt(e){return!e}var Wt=Ee(Ot(Vt,Vt)),Xt=Pe(Ot(Vt,Vt)),Qt=we(Xt,1);function Kt(t){return function(e){return null==e?void 0:e[t]}}function $t(e,o,t,r){var i=new Array(o.length);e(o,function(e,n,o){t(e,function(e,t){i[n]=!!t,o(e)})},function(e){if(e)return r(e);for(var t=[],n=0;n<o.length;n++)i[n]&&t.push(o[n]);r(null,t)})}function Jt(e,t,i,n){var a=[];e(t,function(n,o,r){i(n,function(e,t){e?r(e):(t&&a.push({index:o,value:n}),r())})},function(e){e?n(e):n(null,Me(a.sort(function(e,t){return e.index-t.index}),Kt("value")))})}function Yt(e,t,n,o){(I(t)?$t:Jt)(e,t,y(n),o||B)}var Zt=Ee(Yt),en=Pe(Yt),tn=we(en,1);function nn(e,t){var n=be(t||B),o=y(Ht(e));!function e(t){if(t)return n(t);o(e)}()}var on=function(e,t,n,s){s=s||B;var r=y(n);Le(e,t,function(n,o){r(n,function(e,t){return e?o(e):o(null,{key:t,val:n})})},function(e,t){for(var n={},o=Object.prototype.hasOwnProperty,r=0;r<t.length;r++)if(t[r]){var i=t[r].key,a=t[r].val;o.call(n,i)?n[i].push(a):n[i]=[a]}return s(e,n)})},rn=we(on,1/0),an=we(on,1),sn=Ut("log");function ln(e,t,n,o){o=N(o||B);var r={},i=y(n);_e(e,t,function(e,n,o){i(e,n,function(e,t){if(e)return o(e);r[n]=t,o()})},function(e){o(e,r)})}var un=we(ln,1/0),pn=we(ln,1);function cn(e,t){return t in e}function dn(e,n){var i=Object.create(null),a=Object.create(null);n=n||xt;var o=y(e),t=l(function(e,t){var r=n.apply(null,e);cn(i,r)?f(function(){t.apply(null,i[r])}):cn(a,r)?a[r].push(t):(a[r]=[t],o.apply(null,e.concat(function(){var e=h(arguments);i[r]=e;var t=a[r];delete a[r];for(var n=0,o=t.length;n<o;n++)t[n].apply(null,e)})))});return t.memo=i,t.unmemoized=e,t}var fn=a(o?Qn.nextTick:n?$n:i);function mn(e,t,n){n=n||B;var r=I(t)?[]:{};e(t,function(e,n,o){y(e)(function(e,t){2<arguments.length&&(t=h(arguments,1)),r[n]=t,o(e)})},function(e){n(e,r)})}function hn(e,t){mn(Ae,e,t)}function yn(e,t,n){mn(ke(t),e,n)}var vn=function(e,t){var n=y(e);return vt(function(e,t){n(e[0],t)},t,1)},gn=function(e,t){var s=vn(e,t);return s.push=function(e,t,n){if(null==n&&(n=B),"function"!=typeof n)throw new Error("task callback must be a function");if(s.started=!0,Q(e)||(e=[e]),0===e.length)return f(function(){s.drain()});t=t||0;for(var o=s._tasks.head;o&&t>=o.priority;)o=o.next;for(var r=0,i=e.length;r<i;r++){var a={data:e[r],priority:t,callback:n};o?s._tasks.insertBefore(o,a):s._tasks.push(a)}f(s.process)},delete s.unshift,s};function bn(e,t){if(t=N(t||B),!Q(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,o=e.length;n<o;n++)y(e[n])(t)}function kn(e,t,n,o){kt(h(e).reverse(),t,n,o)}function _n(e){var t=y(e);return l(function(e,o){return e.push(function(e,t){var n;e?o(null,{error:e}):(n=arguments.length<=2?t:h(arguments,1),o(null,{value:n}))}),t.apply(this,e)})}function wn(e){var n;return Q(e)?n=Me(e,_n):(n={},Re(e,function(e,t){n[t]=_n.call(this,e)})),n}function Tn(e,t,o,n){Yt(e,t,function(e,n){o(e,function(e,t){n(e,!t)})},n)}var jn=Ee(Tn),An=Pe(Tn),En=we(An,1);function Sn(e){return function(){return e}}function xn(e,t,n){var o={times:5,intervalFunc:Sn(0)};if(arguments.length<3&&"function"==typeof e?(n=t||B,t=e):(!function(e,t){if("object"==typeof t)e.times=+t.times||5,e.intervalFunc="function"==typeof t.interval?t.interval:Sn(+t.interval||0),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||5}}(o,e),n=n||B),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var r=y(t),i=1;!function t(){r(function(e){e&&i++<o.times&&("function"!=typeof o.errorFilter||o.errorFilter(e))?setTimeout(t,o.intervalFunc(i)):n.apply(null,arguments)})}()}var On=function(o,e){e||(e=o,o=null);var r=y(e);return l(function(t,e){function n(e){r.apply(null,t.concat(e))}o?xn(o,n,e):xn(n,e)})};function Pn(e,t){mn(bt,e,t)}var Ln=Ee(Ot(Boolean,xt)),Cn=Pe(Ot(Boolean,xt)),zn=we(Cn,1);function Un(e,t,n){var r=y(t);function o(e,t){var n=e.criteria,o=t.criteria;return n<o?-1:o<n?1:0}xe(e,function(n,o){r(n,function(e,t){if(e)return o(e);o(null,{value:n,criteria:t})})},function(e,t){if(e)return n(e);n(null,Me(t.sort(o),Kt("value")))})}function Dn(r,i,a){var s=y(r);return l(function(e,n){var t,o=!1;e.push(function(){o||(n.apply(null,arguments),clearTimeout(t))}),t=setTimeout(function(){var e=r.name||"anonymous",t=new Error('Callback function "'+e+'" timed out.');t.code="ETIMEDOUT",a&&(t.info=a),o=!0,n(t)},i),s.apply(null,e)})}var In=Math.ceil,Rn=Math.max;function Bn(e,t,n,o){var r=y(n);Le(function(e,t,n,o){for(var r=-1,i=Rn(In((t-e)/(n||1)),0),a=Array(i);i--;)a[o?i:++r]=e,e+=n;return a}(0,e,1),t,r,o)}var Nn=we(Bn,1/0),qn=we(Bn,1);function Mn(e,o,t,n){arguments.length<=3&&(n=t,t=o,o=Q(e)?[]:{}),n=N(n||B);var r=y(t);Ae(e,function(e,t,n){r(o,e,t,n)},function(e){n(e,o)})}function Fn(e,t){var o,r=null;t=t||B,Gt(e,function(e,n){y(e)(function(e,t){o=2<arguments.length?h(arguments,1):t,n(!(r=e))})},function(){t(r,o)})}function Gn(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function Hn(n,e,o){o=be(o||B);var r=y(e);if(!n())return o(null);var i=function(e){if(e)return o(e);if(n())return r(i);var t=h(arguments,1);o.apply(null,[null].concat(t))};r(i)}function Vn(e,t,n){Hn(function(){return!e.apply(this,arguments)},t,n)}var Wn=function(n,t){if(t=N(t||B),!Q(n))return t(new Error("First argument to waterfall must be an array of functions"));if(!n.length)return t();var o=0;function r(e){var t=y(n[o++]);e.push(be(i)),t.apply(null,e)}function i(e){if(e||o===n.length)return t.apply(null,arguments);r(h(arguments,1))}r([])},Xn={apply:t,applyEach:Oe,applyEachSeries:ze,asyncify:s,auto:qe,autoInject:mt,cargo:gt,compose:wt,concat:At,concatLimit:jt,concatSeries:Et,constant:St,detect:Lt,detectLimit:Ct,detectSeries:zt,dir:Dt,doDuring:It,doUntil:Bt,doWhilst:Rt,during:Nt,each:Mt,eachLimit:Ft,eachOf:Ae,eachOfLimit:_e,eachOfSeries:bt,eachSeries:Gt,ensureAsync:Ht,every:Wt,everyLimit:Xt,everySeries:Qt,filter:Zt,filterLimit:en,filterSeries:tn,forever:nn,groupBy:rn,groupByLimit:on,groupBySeries:an,log:sn,map:xe,mapLimit:Le,mapSeries:Ce,mapValues:un,mapValuesLimit:ln,mapValuesSeries:pn,memoize:dn,nextTick:fn,parallel:hn,parallelLimit:yn,priorityQueue:gn,queue:vn,race:bn,reduce:kt,reduceRight:kn,reflect:_n,reflectAll:wn,reject:jn,rejectLimit:An,rejectSeries:En,retry:xn,retryable:On,seq:_t,series:Pn,setImmediate:f,some:Ln,someLimit:Cn,someSeries:zn,sortBy:Un,timeout:Dn,times:Nn,timesLimit:Bn,timesSeries:qn,transform:Mn,tryEach:Fn,unmemoize:Gn,until:Vn,waterfall:Wn,whilst:Hn,all:Wt,allLimit:Xt,allSeries:Qt,any:Ln,anyLimit:Cn,anySeries:zn,find:Lt,findLimit:Ct,findSeries:zt,forEach:Mt,forEachSeries:Gt,forEachLimit:Ft,forEachOf:Ae,forEachOfSeries:bt,forEachOfLimit:_e,inject:kt,foldl:kt,foldr:kn,select:Zt,selectLimit:en,selectSeries:tn,wrapSync:s};e.default=Xn,e.apply=t,e.applyEach=Oe,e.applyEachSeries=ze,e.asyncify=s,e.auto=qe,e.autoInject=mt,e.cargo=gt,e.compose=wt,e.concat=At,e.concatLimit=jt,e.concatSeries=Et,e.constant=St,e.detect=Lt,e.detectLimit=Ct,e.detectSeries=zt,e.dir=Dt,e.doDuring=It,e.doUntil=Bt,e.doWhilst=Rt,e.during=Nt,e.each=Mt,e.eachLimit=Ft,e.eachOf=Ae,e.eachOfLimit=_e,e.eachOfSeries=bt,e.eachSeries=Gt,e.ensureAsync=Ht,e.every=Wt,e.everyLimit=Xt,e.everySeries=Qt,e.filter=Zt,e.filterLimit=en,e.filterSeries=tn,e.forever=nn,e.groupBy=rn,e.groupByLimit=on,e.groupBySeries=an,e.log=sn,e.map=xe,e.mapLimit=Le,e.mapSeries=Ce,e.mapValues=un,e.mapValuesLimit=ln,e.mapValuesSeries=pn,e.memoize=dn,e.nextTick=fn,e.parallel=hn,e.parallelLimit=yn,e.priorityQueue=gn,e.queue=vn,e.race=bn,e.reduce=kt,e.reduceRight=kn,e.reflect=_n,e.reflectAll=wn,e.reject=jn,e.rejectLimit=An,e.rejectSeries=En,e.retry=xn,e.retryable=On,e.seq=_t,e.series=Pn,e.setImmediate=f,e.some=Ln,e.someLimit=Cn,e.someSeries=zn,e.sortBy=Un,e.timeout=Dn,e.times=Nn,e.timesLimit=Bn,e.timesSeries=qn,e.transform=Mn,e.tryEach=Fn,e.unmemoize=Gn,e.until=Vn,e.waterfall=Wn,e.whilst=Hn,e.all=Wt,e.allLimit=Xt,e.allSeries=Qt,e.any=Ln,e.anyLimit=Cn,e.anySeries=zn,e.find=Lt,e.findLimit=Ct,e.findSeries=zt,e.forEach=Mt,e.forEachSeries=Gt,e.forEachLimit=Ft,e.forEachOf=Ae,e.forEachOfSeries=bt,e.forEachOfLimit=_e,e.inject=kt,e.foldl=kt,e.foldr=kn,e.select=Zt,e.selectLimit=en,e.selectSeries=tn,e.wrapSync=s,Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof t&&void 0!==Jn?t:e.async=e.async||{})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{_process:34,timers:35}],3:[function(e,t,n){t.exports=e("./lib/axios")},{"./lib/axios":5}],4:[function(k,e,t){(function(d){"use strict";var f=k("./../utils"),m=k("./../core/settle"),h=k("./../helpers/buildURL"),y=k("./../helpers/parseHeaders"),v=k("./../helpers/isURLSameOrigin"),g=k("../core/createError"),b="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||k("./../helpers/btoa");e.exports=function(c){return new Promise(function(n,o){var r=c.data,i=c.headers;f.isFormData(r)&&delete i["Content-Type"];var a=new XMLHttpRequest,e="onreadystatechange",s=!1;if("test"===d.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in a||v(c.url)||(a=new window.XDomainRequest,e="onload",s=!0,a.onprogress=function(){},a.ontimeout=function(){}),c.auth){var t=c.auth.username||"",l=c.auth.password||"";i.Authorization="Basic "+b(t+":"+l)}if(a.open(c.method.toUpperCase(),h(c.url,c.params,c.paramsSerializer),!0),a.timeout=c.timeout,a[e]=function(){if(a&&(4===a.readyState||s)&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in a?y(a.getAllResponseHeaders()):null,t={data:c.responseType&&"text"!==c.responseType?a.response:a.responseText,status:1223===a.status?204:a.status,statusText:1223===a.status?"No Content":a.statusText,headers:e,config:c,request:a};m(n,o,t),a=null}},a.onerror=function(){o(g("Network Error",c,null,a)),a=null},a.ontimeout=function(){o(g("timeout of "+c.timeout+"ms exceeded",c,"ECONNABORTED",a)),a=null},f.isStandardBrowserEnv()){var u=k("./../helpers/cookies"),p=(c.withCredentials||v(c.url))&&c.xsrfCookieName?u.read(c.xsrfCookieName):void 0;p&&(i[c.xsrfHeaderName]=p)}if("setRequestHeader"in a&&f.forEach(i,function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete i[t]:a.setRequestHeader(t,e)}),c.withCredentials&&(a.withCredentials=!0),c.responseType)try{a.responseType=c.responseType}catch(e){if("json"!==c.responseType)throw e}"function"==typeof c.onDownloadProgress&&a.addEventListener("progress",c.onDownloadProgress),"function"==typeof c.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",c.onUploadProgress),c.cancelToken&&c.cancelToken.promise.then(function(e){a&&(a.abort(),o(e),a=null)}),void 0===r&&(r=null),a.send(r)})}}).call(this,k("_process"))},{"../core/createError":11,"./../core/settle":14,"./../helpers/btoa":18,"./../helpers/buildURL":19,"./../helpers/cookies":21,"./../helpers/isURLSameOrigin":23,"./../helpers/parseHeaders":25,"./../utils":27,_process:34}],5:[function(e,t,n){"use strict";var o=e("./utils"),r=e("./helpers/bind"),i=e("./core/Axios"),a=e("./defaults");function s(e){var t=new i(e),n=r(i.prototype.request,t);return o.extend(n,i.prototype,t),o.extend(n,t),n}var l=s(a);l.Axios=i,l.create=function(e){return s(o.merge(a,e))},l.Cancel=e("./cancel/Cancel"),l.CancelToken=e("./cancel/CancelToken"),l.isCancel=e("./cancel/isCancel"),l.all=function(e){return Promise.all(e)},l.spread=e("./helpers/spread"),t.exports=l,t.exports.default=l},{"./cancel/Cancel":6,"./cancel/CancelToken":7,"./cancel/isCancel":8,"./core/Axios":9,"./defaults":16,"./helpers/bind":17,"./helpers/spread":26,"./utils":27}],6:[function(e,t,n){"use strict";function o(e){this.message=e}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,t.exports=o},{}],7:[function(e,t,n){"use strict";var o=e("./Cancel");function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},{"./Cancel":6}],8:[function(e,t,n){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],9:[function(e,t,n){"use strict";var o=e("./../defaults"),r=e("./../utils"),i=e("./InterceptorManager"),a=e("./dispatchRequest"),s=e("./../helpers/isAbsoluteURL"),l=e("./../helpers/combineURLs");function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e&&(e=r.merge({url:arguments[0]},arguments[1])),(e=r.merge(o,this.defaults,{method:"get"},e)).method=e.method.toLowerCase(),e.baseURL&&!s(e.url)&&(e.url=l(e.baseURL,e.url));var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},r.forEach(["delete","get","head","options"],function(n){u.prototype[n]=function(e,t){return this.request(r.merge(t||{},{method:n,url:e}))}}),r.forEach(["post","put","patch"],function(o){u.prototype[o]=function(e,t,n){return this.request(r.merge(n||{},{method:o,url:e,data:t}))}}),t.exports=u},{"./../defaults":16,"./../helpers/combineURLs":20,"./../helpers/isAbsoluteURL":22,"./../utils":27,"./InterceptorManager":10,"./dispatchRequest":12}],10:[function(e,t,n){"use strict";var o=e("./../utils");function r(){this.handlers=[]}r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(t){o.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},{"./../utils":27}],11:[function(e,t,n){"use strict";var a=e("./enhanceError");t.exports=function(e,t,n,o,r){var i=new Error(e);return a(i,t,n,o,r)}},{"./enhanceError":13}],12:[function(e,t,n){"use strict";var o=e("./../utils"),r=e("./transformData"),i=e("../cancel/isCancel"),a=e("../defaults");function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return s(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(s(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},{"../cancel/isCancel":8,"../defaults":16,"./../utils":27,"./transformData":15}],13:[function(e,t,n){"use strict";t.exports=function(e,t,n,o,r){return e.config=t,n&&(e.code=n),e.request=o,e.response=r,e}},{}],14:[function(e,t,n){"use strict";var r=e("./createError");t.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},{"./createError":11}],15:[function(e,t,n){"use strict";var o=e("./../utils");t.exports=function(t,n,e){return o.forEach(e,function(e){t=e(t,n)}),t}},{"./../utils":27}],16:[function(s,l,e){(function(e){"use strict";var n=s("./utils"),o=s("./helpers/normalizeHeaderName"),t={"Content-Type":"application/x-www-form-urlencoded"};function r(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i,a={adapter:("undefined"!=typeof XMLHttpRequest?i=s("./adapters/xhr"):void 0!==e&&(i=s("./adapters/http")),i),transformRequest:[function(e,t){return o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){a.headers[e]={}}),n.forEach(["post","put","patch"],function(e){a.headers[e]=n.merge(t)}),l.exports=a}).call(this,s("_process"))},{"./adapters/http":4,"./adapters/xhr":4,"./helpers/normalizeHeaderName":24,"./utils":27,_process:34}],17:[function(e,t,n){"use strict";t.exports=function(n,o){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(o,e)}}},{}],18:[function(e,t,n){"use strict";function s(){this.message="String contains an invalid character"}(s.prototype=new Error).code=5,s.prototype.name="InvalidCharacterError",t.exports=function(e){for(var t,n,o=String(e),r="",i=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.charAt(0|i)||(a="=",i%1);r+=a.charAt(63&t>>8-i%1*8)){if(255<(n=o.charCodeAt(i+=.75)))throw new s;t=t<<8|n}return r}},{}],19:[function(e,t,n){"use strict";var i=e("./../utils");function a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var r=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),r.push(a(t)+"="+a(e))}))}),o=r.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},{"./../utils":27}],20:[function(e,t,n){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],21:[function(e,t,n){"use strict";var s=e("./../utils");t.exports=s.isStandardBrowserEnv()?{write:function(e,t,n,o,r,i){var a=[];a.push(e+"="+encodeURIComponent(t)),s.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),s.isString(o)&&a.push("path="+o),s.isString(r)&&a.push("domain="+r),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":27}],22:[function(e,t,n){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],23:[function(e,t,n){"use strict";var a=e("./../utils");t.exports=a.isStandardBrowserEnv()?function(){var n,o=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var t=e;return o&&(r.setAttribute("href",t),t=r.href),r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(e){var t=a.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0}},{"./../utils":27}],24:[function(e,t,n){"use strict";var r=e("../utils");t.exports=function(n,o){r.forEach(n,function(e,t){t!==o&&t.toUpperCase()===o.toUpperCase()&&(n[o]=e,delete n[t])})}},{"../utils":27}],25:[function(e,t,n){"use strict";var i=e("./../utils");t.exports=function(e){var t,n,o,r={};return e&&i.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t&&(r[t]=r[t]?r[t]+", "+n:n)}),r}},{"./../utils":27}],26:[function(e,t,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},{}],27:[function(e,t,n){"use strict";var r=e("./helpers/bind"),o=e("is-buffer"),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!=e)if("object"==typeof e||a(e)||(e=[e]),a(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}t.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function n(){var o={};function e(e,t){"object"==typeof o[t]&&"object"==typeof e?o[t]=n(o[t],e):o[t]=e}for(var t=0,r=arguments.length;t<r;t++)u(arguments[t],e);return o},extend:function(n,e,o){return u(e,function(e,t){n[t]=o&&"function"==typeof e?r(e,o):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},{"./helpers/bind":17,"is-buffer":32}],28:[function(e,t,n){},{}],29:[function(n,o,i){(function(t){function e(){var e;try{e=i.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(i=o.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(r=o))}),e.splice(r,0,n)},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=e,i.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},i.enable(e())}).call(this,n("_process"))},{"./debug":30,_process:34}],30:[function(e,t,s){var l;function n(e){function o(){if(o.enabled){var r=o,e=+new Date,t=e-(l||e);r.diff=t,r.prev=l,r.curr=e,l=e;for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];i[0]=s.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=s.formatters[t];if("function"==typeof n){var o=i[a];e=n.call(r,o),i.splice(a,1),a--}return e}),s.formatArgs.call(r,i),(o.log||s.log||console.log.bind(console)).apply(r,i)}}return o.namespace=e,o.enabled=s.enabled(e),o.useColors=s.useColors(),o.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return s.colors[Math.abs(n)%s.colors.length]}(e),"function"==typeof s.init&&s.init(o),o}(s=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},s.disable=function(){s.enable("")},s.enable=function(e){s.save(e),s.names=[],s.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,o=0;o<n;o++)t[o]&&("-"===(e=t[o].replace(/\*/g,".*?"))[0]?s.skips.push(new RegExp("^"+e.substr(1)+"$")):s.names.push(new RegExp("^"+e+"$")))},s.enabled=function(e){var t,n;for(t=0,n=s.skips.length;t<n;t++)if(s.skips[t].test(e))return!1;for(t=0,n=s.names.length;t<n;t++)if(s.names[t].test(e))return!0;return!1},s.humanize=e("ms"),s.names=[],s.skips=[],s.formatters={}},{ms:33}],31:[function(e,o,i){(function(r){!function(p){var c=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=10;function u(){this._events={},this._conf&&n.call(this,this._conf)}function n(e){e?((this._conf=e).delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==p?e.maxListeners:t,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=t}function a(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var o=new Error(n);o.name="MaxListenersExceededWarning",o.emitter=this,o.count=e,r.emitWarning(o)}else console.error(n),console.trace&&console.trace()}function e(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,n.call(this,e)}function h(e,t,n,o){if(!n)return[];var r,i,a,s,l,u,p,c=[],d=t.length,f=t[o],m=t[o+1];if(o===d&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(r=0,i=n._listeners.length;r<i;r++)e&&e.push(n._listeners[r]);return[n]}if("*"===f||"**"===f||n[f]){if("*"===f){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(c=c.concat(h(e,t,n[a],o+1)));return c}if("**"===f){for(a in(p=o+1===d||o+2===d&&"*"===m)&&n._listeners&&(c=c.concat(h(e,t,n,d))),n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!p&&(c=c.concat(h(e,t,n[a],d))),c=c.concat(h(e,t,n[a],o))):c=a===m?c.concat(h(e,t,n[a],o+2)):c.concat(h(e,t,n[a],o)));return c}c=c.concat(h(e,t,n[f],o+1))}if((s=n["*"])&&h(e,t,s,o+1),l=n["**"])if(o<d)for(a in l._listeners&&h(e,t,l,d),l)"_listeners"!==a&&l.hasOwnProperty(a)&&(a===m?h(e,t,l[a],o+2):a===f?h(e,t,l[a],o+1):((u={})[a]=l[a],h(e,t,{"**":u},o+1)));else l._listeners?h(e,t,l,d):l["*"]&&l["*"]._listeners&&h(e,t,l["*"],d);return c}(e.EventEmitter2=e).prototype.delimiter=".",e.prototype.setMaxListeners=function(e){e!==p&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},e.prototype.event="",e.prototype.once=function(e,t){return this._once(e,t,!1)},e.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},e.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},e.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},e.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},e.prototype._many=function(e,t,n,o){var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function i(){return 0==--t&&r.off(e,i),n.apply(this,arguments)}return i._origin=n,this._on(e,i,o),r},e.prototype.emit=function(){this._events||u.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,o,r,i,a=arguments.length;if(this._all&&this._all.length){if(i=this._all.slice(),3<a)for(t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];for(o=0,n=i.length;o<n;o++)switch(this.event=e,a){case 1:i[o].call(this,e);break;case 2:i[o].call(this,e,arguments[1]);break;case 3:i[o].call(this,e,arguments[1],arguments[2]);break;default:i[o].apply(this,t)}}if(this.wildcard){i=[];var s="string"==typeof e?e.split(this.delimiter):e.slice();h.call(this,i,s,this.listenerTree,0)}else{if("function"==typeof(i=this._events[e])){switch(this.event=e,a){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),r=1;r<a;r++)t[r-1]=arguments[r];i.apply(this,t)}return!0}i&&(i=i.slice())}if(i&&i.length){if(3<a)for(t=new Array(a-1),r=1;r<a;r++)t[r-1]=arguments[r];for(o=0,n=i.length;o<n;o++)switch(this.event=e,a){case 1:i[o].call(this);break;case 2:i[o].call(this,arguments[1]);break;case 3:i[o].call(this,arguments[1],arguments[2]);break;default:i[o].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},e.prototype.emitAsync=function(){this._events||u.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,o,r,i,a=[],s=arguments.length;if(this._all){if(3<s)for(t=new Array(s),r=1;r<s;r++)t[r]=arguments[r];for(o=0,n=this._all.length;o<n;o++)switch(this.event=e,s){case 1:a.push(this._all[o].call(this,e));break;case 2:a.push(this._all[o].call(this,e,arguments[1]));break;case 3:a.push(this._all[o].call(this,e,arguments[1],arguments[2]));break;default:a.push(this._all[o].apply(this,t))}}if(this.wildcard){i=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();h.call(this,i,l,this.listenerTree,0)}else i=this._events[e];if("function"==typeof i)switch(this.event=e,s){case 1:a.push(i.call(this));break;case 2:a.push(i.call(this,arguments[1]));break;case 3:a.push(i.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(s-1),r=1;r<s;r++)t[r-1]=arguments[r];a.push(i.apply(this,t))}else if(i&&i.length){if(i=i.slice(),3<s)for(t=new Array(s-1),r=1;r<s;r++)t[r-1]=arguments[r];for(o=0,n=i.length;o<n;o++)switch(this.event=e,s){case 1:a.push(i[o].call(this));break;case 2:a.push(i[o].call(this,arguments[1]));break;case 3:a.push(i[o].call(this,arguments[1],arguments[2]));break;default:a.push(i[o].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},e.prototype.on=function(e,t){return this._on(e,t,!1)},e.prototype.prependListener=function(e,t){return this._on(e,t,!0)},e.prototype.onAny=function(e){return this._onAny(e,!1)},e.prototype.prependAny=function(e){return this._onAny(e,!0)},e.prototype.addListener=e.prototype.on,e.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},e.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||u.call(this),this.emit("newListener",e,t),this.wildcard?function(e,t){for(var n=0,o=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<o;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var r=this.listenerTree,i=e.shift();i!==p;){if(r[i]||(r[i]={}),r=r[i],0===e.length)return r._listeners?("function"==typeof r._listeners&&(r._listeners=[r._listeners]),r._listeners.push(t),!r._listeners.warned&&0<this._maxListeners&&r._listeners.length>this._maxListeners&&(r._listeners.warned=!0,a.call(this,r._listeners.length,i))):r._listeners=t,!0;i=e.shift()}return!0}.call(this,e,t):this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&0<this._maxListeners&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,a.call(this,this._events[e].length,e))):this._events[e]=t,this},e.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,o=[];if(this.wildcard){var r="string"==typeof e?e.split(this.delimiter):e.slice();o=h.call(this,null,r,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],o.push({_listeners:n})}for(var i=0;i<o.length;i++){var a=o[i];if(n=a._listeners,c(n)){for(var s=-1,l=0,u=n.length;l<u;l++)if(n[l]===t||n[l].listener&&n[l].listener===t||n[l]._origin&&n[l]._origin===t){s=l;break}if(s<0)continue;return this.wildcard?a._listeners.splice(s,1):this._events[e].splice(s,1),0===n.length&&(this.wildcard?delete a._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete a._listeners:delete this._events[e],this.emit("removeListener",e,t))}return function e(t){if(t!==p){var n=Object.keys(t);for(var o in n){var r=n[o],i=t[r];i instanceof Function||"object"!=typeof i||null===i||(0<Object.keys(i).length&&e(t[r]),0===Object.keys(i).length&&delete t[r])}}}(this.listenerTree),this},e.prototype.offAny=function(e){var t,n=0,o=0;if(e&&this._all&&0<this._all.length){for(n=0,o=(t=this._all).length;n<o;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(n=0,o=(t=this._all).length;n<o;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||u.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=h.call(this,null,t,this.listenerTree,0),o=0;o<n.length;o++){n[o]._listeners=null}else this._events&&(this._events[e]=null);return this},e.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return h.call(this,t,n,this.listenerTree,0),t}return this._events||u.call(this),this._events[e]||(this._events[e]=[]),c(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},e.prototype.eventNames=function(){return Object.keys(this._events)},e.prototype.listenerCount=function(e){return this.listeners(e).length},e.prototype.listenersAny=function(){return this._all?this._all:[]},"object"==typeof i?o.exports=e:window.EventEmitter2=e}()}).call(this,e("_process"))},{_process:34}],32:[function(e,t,n){function o(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(o(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&o(t.slice(0,0))||!!e._isBuffer);var t}},{}],33:[function(e,t,n){var r=36e5,i=864e5;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,o=typeof e;if("string"===o&&0<e.length)return function(e){if(100<(e=String(e)).length)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*i;case"hours":case"hour":case"hrs":case"hr":case"h":return n*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===o&&!1===isNaN(e))return t.long?a(n=e,i,"day")||a(n,r,"hour")||a(n,6e4,"minute")||a(n,1e3,"second")||n+" ms":function(e){if(i<=e)return Math.round(e/i)+"d";if(r<=e)return Math.round(e/r)+"h";if(6e4<=e)return Math.round(e/6e4)+"m";if(1e3<=e)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],34:[function(e,t,n){var o,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(o===setTimeout)return setTimeout(t,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(e){o=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,p=[],c=!1,d=-1;function f(){c&&u&&(c=!1,u.length?p=u.concat(p):d=-1,p.length&&m())}function m(){if(!c){var e=l(f);c=!0;for(var t=p.length;t;){for(u=p,p=[];++d<t;)u&&u[d].run();d=-1,t=p.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new h(e,t)),1!==p.length||c||l(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],35:[function(l,e,u){(function(e,t){var o=l("process/browser.js").nextTick,n=Function.prototype.apply,r=Array.prototype.slice,i={},a=0;function s(e,t){this._id=e,this._clearFn=t}u.setTimeout=function(){return new s(n.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new s(n.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(e){e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},u.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},u._unrefActive=u.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},u.setImmediate="function"==typeof e?e:function(e){var t=a++,n=!(arguments.length<2)&&r.call(arguments,1);return i[t]=!0,o(function(){i[t]&&(n?e.apply(null,n):e.call(null),u.clearImmediate(t))}),t},u.clearImmediate="function"==typeof t?t:function(e){delete i[e]}}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":34,timers:35}],36:[function(e,t,n){t.exports={name:"@pm2/js-api",version:"0.5.21",description:"PM2.io API Client for Javascript",main:"index.js",engines:{node:">=4.0"},scripts:{test:"mocha test/*",build:"browserify -s Keymetrics -r ./ > ./dist/keymetrics.es5.js",dist:"browserify -s Keymetrics -r ./ | uglifyjs -c warnings=false -m > ./dist/keymetrics.es5.min.js",doc:"jsdoc -r ./src --readme ./README.md -d doc -t ./node_modules/minami",clean:"rm dist/*"},repository:{type:"git",url:"git+https://github.com/keymetrics/km.js.git"},keywords:["keymetrics","api","dashboard","monitoring","wrapper"],author:"Keymetrics Team",license:"Apache 2.0",bugs:{url:"https://github.com/keymetrics/km.js/issues"},homepage:"https://github.com/keymetrics/km.js#readme",dependencies:{async:"^2.4.1",axios:"^0.16.2",debug:"^2.6.8",eventemitter2:"^4.1.0",ws:"^3.0.0"},devDependencies:{"babel-core":"^6.26.0","babel-preset-es2015":"*","babel-preset-stage-2":"*",babelify:"*",browserify:"^13.1.0",jsdoc:"^3.4.2",minami:"^1.1.1",mocha:"^3.0.2",pm2:"latest",should:"*",standard:"^10.0.2","uglify-js":"*"},browserify:{debug:"true",transform:[["babelify",{presets:[["babel-preset-es2015",{debug:"true",sourceMaps:"true"}]]}]]},browser:{"./src/auth_strategies/embed_strategy.js":!1,ws:!1},standard:{ignore:["dist/**","examples/**","test/**"]}}},{}],37:[function(e,t,n){t.exports={user:{otp:[{route:{name:"/api/users/otp",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"409",description:"the otp is already enabled for the user, you can only delete it",optional:!1},{type:"200",description:"the otp can be registered for the account, return the full response",optional:!1}],response:[{name:"user",type:"object",description:"user model",optional:!1,defaultvalue:null},{name:"key",type:"string",description:"otp secret key",optional:!1,defaultvalue:null},{name:"qrImage",type:"string",description:"url to the QrCode",optional:!1,defaultvalue:null}],name:"retrieve",longname:"User.otp.retrieve",scope:"route"},{route:{name:"/api/users/otp",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],body:[{name:"otpKey",type:"string",description:"secret key used to generate OTP code",optional:!1,defaultvalue:null},{name:"otpToken",type:"string",description:"a currently valid OTP code generated with the otpKey",optional:!1,defaultvalue:null}],code:[{type:"400",description:"missing parameters",optional:!1},{type:"403",description:"the code asked to add the OTP from user account is invalid",optional:!1},{type:"500",description:"error from database",optional:!1},{type:"200",description:"the otp has been registered for the user",optional:!1}],name:"enable",longname:"User.otp.enable",scope:"route"},{route:{name:"/api/users/otp",type:"DELETE"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],query:[{name:"otpToken",type:"string",description:"a currently valid OTP code",optional:!1,defaultvalue:null}],code:[{type:"400",description:"missing parameters",optional:!1},{type:"403",description:"the code asked to remove the OTP from user account is invalid",optional:!1},{type:"500",description:"error from database",optional:!1},{type:"200",description:"the otp has been deleted for the user",optional:!1}],name:"disable",longname:"User.otp.disable",scope:"route"}],providers:[{route:{name:"/api/users/integrations",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"200",description:"succesfully retrieved providers",optional:!1}],response:[{name:".",type:"array",description:"array of providers for user account",optional:!1,defaultvalue:null}],name:"retrieve",longname:"User.providers.retrieve",scope:"route"},{route:{name:"/api/users/integrations",type:"POST"},authentication:!0,body:[{name:"name",type:"string",description:"the provider name",optional:!1,defaultvalue:null}],header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"400",description:"invalid parameters",optional:!1},{type:"403",description:"the user already have this provider",optional:!1},{type:"200",description:"succesfully added the provider",optional:!1}],name:"add",longname:"User.providers.add",scope:"route"},{route:{name:"/api/users/integrations/:name",type:"DELETE"},authentication:!0,params:[{name:":name",type:"string",description:"the provider name",optional:!1}],header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"400",description:"invalid parameters or provider isn't implemented",optional:!1},{type:"403",description:"the provider isn't enabled",optional:!1},{type:"200",description:"succesfully removed the provider",optional:!1}],name:"remove",longname:"User.providers.remove",scope:"route"}],default:[{name:"retrieve",route:{name:"/api/users/isLogged",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"200",description:"the user has been retrieved",optional:!1}],response:[{name:"user",type:"object",description:"user model",optional:!1,defaultvalue:null}],longname:"User.retrieve",scope:"route"},{route:{name:"/api/users/show/:id",type:"GET"},params:[{name:":id",type:"string",description:"user id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"invalid parameters (no id provided)",optional:!1},{type:"404",description:"no user account where found",optional:!1},{type:"200",description:"the mail has been sent to the provided email",optional:!1}],response:[{name:"String",type:"",description:"email user email",optional:!1,defaultvalue:null},{name:"String",type:"",description:"username user pseudo",optional:!1,defaultvalue:null}],name:"show",longname:"User.show",scope:"route",authentication:!1},{deprecated:!0,route:{name:"/api/users/payment/",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],body:[{name:"token",type:"string",description:"card token generated by stripe",optional:!1,defaultvalue:null}],code:[{type:"400",description:"missing parameters",optional:!1},{type:"500",description:"stripe error",optional:!1},{type:"200",description:"succesfully added the card",optional:!1}],response:[{name:"data",type:"object",description:"stripe credit card Object",optional:!1,defaultvalue:null}],name:"attachCreditCard",longname:"User.attachCreditCard",scope:"route"},{deprecated:!0,route:{name:"/api/users/payment/subcriptions",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"200",description:"succesfully retrieved the charges",optional:!1}],response:[{name:"data",type:"array",description:"list of stripe subscriptions object",optional:!1,defaultvalue:null}],name:"listSubscriptions",longname:"User.listSubscriptions",scope:"route"},{deprecated:!0,route:{name:"/api/users/payment/charges",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"200",description:"succesfully retieved the charges",optional:!1}],response:[{name:"data",type:"array",description:"list of stripe charges object",optional:!1,defaultvalue:null}],name:"listCharges",longname:"User.listCharges",scope:"route"},{deprecated:!0,route:{name:"/api/users/payment/card/:card_id",type:"GET"},authentication:!0,params:[{name:":card_id",type:"string",description:"the stripe id of the card",optional:!1}],header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters card_id",optional:!1},{type:"200",description:"succesfully retieved the card",optional:!1}],response:[{name:"data",type:"array",description:"stripe card object",optional:!1,defaultvalue:null}],name:"fetchCreditCard",longname:"User.fetchCreditCard",scope:"route"},{deprecated:!0,route:{name:"/api/users/payment/card",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"404",description:"the user doesn't have any default card",optional:!1},{type:"200",description:"succesfully retieved the card",optional:!1}],response:[{name:"data",type:"array",description:"stripe card object",optional:!1,defaultvalue:null}],name:"fetchDefaultCreditCard",longname:"User.fetchDefaultCreditCard",scope:"route"},{deprecated:!0,route:{name:"/api/users/payment/card",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],body:[{name:"id",type:"string",description:"stripe card id",optional:!1,defaultvalue:null},{name:"metadata",type:"object",description:"the metadata you can update",optional:!0,defaultvalue:null},{name:"metadata.address_line1",type:"string",description:"",optional:!0,defaultvalue:null},{name:"metadata.address_country",type:"string",description:"",optional:!0,defaultvalue:null},{name:"metadata.address_zip",type:"string",description:"",optional:!0,defaultvalue:null},{name:"metadata.address_city",type:"string",description:"",optional:!0,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters, you need to specify a card",optional:!1},{type:"200",description:"succesfully updated the card",optional:!1}],response:[{name:"data",type:"array",description:"stripe card object",optional:!1,defaultvalue:null}],name:"updateCreditCard",longname:"User.updateCreditCard",scope:"route"},{deprecated:!0,route:{name:"/api/users/payment/card/:card_id",type:"DELETE"},authentication:!0,params:[{name:":card_id",type:"string",description:"the stripe id of the card",optional:!1}],header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters card_id",optional:!1},{type:"200",description:"succesfully retieved the card",optional:!1},{type:"403",description:"the user must have one card active when having a subscription",optional:!1}],response:[{name:".",type:"object",description:"stripe card object",optional:!1,defaultvalue:null}],name:"deleteCreditCard",longname:"User.deleteCreditCard",scope:"route"},{deprecated:!0,route:{name:"/api/users/payment/card/:card_id/default",type:"POST"},authentication:!0,params:[{name:":card_id",type:"string",description:"the stripe id of the card",optional:!1}],header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters card_id",optional:!1},{type:"200",description:"succesfully set the card as default",optional:!1}],response:[{name:"data",type:"object",description:"stripe card object",optional:!1,defaultvalue:null}],name:"setDefaultCard",longname:"User.setDefaultCard",scope:"route"},{deprecated:!0,route:{name:"/api/users/payment/card/stripe_metadata",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters card_id",optional:!1},{type:"200",description:"succesfully retrieved the metadata",optional:!1}],response:[{name:".",type:"object",description:"stripe metadata object",optional:!1,defaultvalue:null}],name:"fetchMetadata",longname:"User.fetchMetadata",scope:"route"},{deprecated:!0,route:{name:"/api/users/payment/stripe_metadata",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],body:[{name:"metadata",type:"object",description:"the metadata you can update",optional:!1,defaultvalue:null},{name:"metadata.vat_number",type:"string",description:"",optional:!0,defaultvalue:null},{name:"metadata.company_name",type:"string",description:"",optional:!0,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters, you need to specify a card",optional:!1},{type:"200",description:"succesfully updated the card",optional:!1}],response:[{name:"data",type:"array",description:"stripe customer metadata object",optional:!1,defaultvalue:null}],name:"updateMetadata",longname:"User.updateMetadata",scope:"route"},{route:{name:"/api/users/update",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],body:[{name:"username",type:"string",description:"",optional:!0,defaultvalue:null},{name:"email",type:"string",description:"",optional:!0,defaultvalue:null},{name:"old_password",type:"string",description:"",optional:!0,defaultvalue:null},{name:"new_password",type:"string",description:"",optional:!0,defaultvalue:null},{name:"info",type:"object",description:"",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"missing parameters, no data to update",optional:!1},{type:"403",description:"when updating the password, it need a new one",optional:!1},{type:"406",description:"when updating the password, the old one is false",optional:!1},{type:"409",description:"when updating email or username\n another user already have one of those two",optional:!1},{type:"200",description:"succesfully updated the card",optional:!1}],response:[{name:".",type:"object",description:"user object",optional:!1,defaultvalue:null}],name:"update",longname:"User.update",scope:"route"}]},bucket:{billing:[{route:{name:"/api/bucket/:id/payment/subscribe",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"plan",type:"string",description:"name of the plan to upgrade to",optional:!1,defaultvalue:null},{name:"stripe_token",type:"string",description:"a card token created by stripe",optional:!0,defaultvalue:null},{name:"coupon_id",type:"string",description:"the id of the stripe coupon",optional:!0,defaultvalue:null}],code:[{type:"400",description:"missing/invalid parameters",optional:!1},{type:"403",description:"need a credit card OR not allowed to subscribe to the plan",optional:!1},{type:"500",description:"stripe/database error",optional:!1},{type:"200",description:"succesfully upgraded",optional:!1}],response:[{name:"bucket",type:"object",description:"the bucket object",optional:!1,defaultvalue:null},{name:"subscription",type:"object",description:"the subscription object attached to the subscription",optional:!1,defaultvalue:null}],name:"subscribe",longname:"Bucket.billing.subscribe",scope:"route"},{route:{name:"/api/bucket/:id/payment/trial",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"400",description:"can't claim trial",optional:!1},{type:"200",description:"trial launched",optional:!1}],response:[{name:"duration",type:"string",description:"the duration of the trial",optional:!1,defaultvalue:null},{name:"plan",type:"string",description:"the plan of the trial",optional:!1,defaultvalue:null}],name:"startTrial",longname:"Bucket.billing.startTrial",scope:"route"},{route:{name:"/api/bucket/:id/payment/invoices",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"400",description:"Missing/invalid parameters",optional:!1},{type:"404",description:"This bucket hasn't invoices",optional:!1},{type:"200",description:"succesfully returns invoices",optional:!1}],response:[{name:".",type:"array",description:"array of invoices",optional:!1,defaultvalue:null}],name:"getInvoices",longname:"Bucket.billing.getInvoices",scope:"route"},{route:{name:"/api/bucket/:id/payment/receipts",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"400",description:"Missing/invalid parameters",optional:!1},{type:"404",description:"This bucket hasn't receipts",optional:!1},{type:"200",description:"succesfully returns receipts",optional:!1}],response:[{name:".",type:"array",description:"array of receipts",optional:!1,defaultvalue:null}],name:"getReceipts",longname:"Bucket.billing.getReceipts",scope:"route"},{route:{name:"/api/bucket/:id/payment/subscription",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"404",description:"the bucket doesnt have any subscription",optional:!1},{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved the subscription",optional:!1}],response:[{name:".",type:"object",description:"subscription object",optional:!1,defaultvalue:null}],name:"getSubcription",longname:"Bucket.billing.getSubcription",scope:"route"},{route:{name:"/api/bucket/:id/payment/cards",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"token",type:"string",description:"card token generated by stripe",optional:!1,defaultvalue:null}],code:[{type:"400",description:"missing parameters",optional:!1},{type:"500",description:"stripe error",optional:!1},{type:"200",description:"succesfully added the card",optional:!1}],response:[{name:"data",type:"object",description:"stripe credit card Object",optional:!1,defaultvalue:null}],name:"attachCreditCard",longname:"Bucket.billing.attachCreditCard",scope:"route"},{route:{name:"/api/bucket/:id/payment/cards",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"stripe error",optional:!1},{type:"404",description:"the user doesn't have any default card",optional:!1},{type:"200",description:"succesfully retieved the charges",optional:!1}],response:[{name:"data",type:"array",description:"list of stripe cards object",optional:!1,defaultvalue:null}],name:"fetchCreditCards",longname:"Bucket.billing.fetchCreditCards",scope:"route"},{route:{name:"/api/bucket/:id/payment/card/:card_id",type:"GET"},authentication:!0,params:[{name:":id",type:"string",description:"bucket id",optional:!1},{name:":card_id",type:"string",description:"the stripe id of the card",optional:!1}],header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters card_id",optional:!1},{type:"404",description:"the user doesn't have any default card",optional:!1},{type:"200",description:"succesfully retieved the card",optional:!1}],response:[{name:"data",type:"array",description:"stripe card object",optional:!1,defaultvalue:null}],name:"fetchCreditCard",longname:"Bucket.billing.fetchCreditCard",scope:"route"},{route:{name:"/api/bucket/:id/payment/card",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"stripe error",optional:!1},{type:"404",description:"the user doesn't have any default card",optional:!1},{type:"200",description:"succesfully retieved the card",optional:!1}],response:[{name:"data",type:"array",description:"stripe card object",optional:!1,defaultvalue:null}],name:"fetchDefaultCreditCard",longname:"Bucket.billing.fetchDefaultCreditCard",scope:"route"},{route:{name:"/api/bucket/:id/payment/card",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"id",type:"string",description:"stripe card id",optional:!1,defaultvalue:null},{name:"address_line1",type:"string",description:"",optional:!0,defaultvalue:null},{name:"address_country",type:"string",description:"",optional:!0,defaultvalue:null},{name:"address_zip",type:"string",description:"",optional:!0,defaultvalue:null},{name:"address_city",type:"string",description:"",optional:!0,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters, you need to specify a card",optional:!1},{type:"200",description:"succesfully updated the card",optional:!1}],response:[{name:"data",type:"array",description:"stripe card object",optional:!1,defaultvalue:null}],name:"updateCreditCard",longname:"Bucket.billing.updateCreditCard",scope:"route"},{route:{name:"/api/bucket/:id/payment/card/:card_id",type:"DELETE"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1},{name:":card_id",type:"string",description:"the stripe id of the card",optional:!1}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters card_id",optional:!1},{type:"200",description:"succesfully retieved the card",optional:!1},{type:"403",description:"the user must have one card active when having a subscription",optional:!1}],response:[{name:".",type:"object",description:"stripe card object",optional:!1,defaultvalue:null}],name:"deleteCreditCard",longname:"Bucket.billing.deleteCreditCard",scope:"route"},{route:{name:"/api/bucket/:id/payment/card/:card_id/default",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1},{name:":card_id",type:"string",description:"the stripe id of the card",optional:!1}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters card_id",optional:!1},{type:"200",description:"succesfully set the card as default",optional:!1}],response:[{name:"data",type:"object",description:"stripe card object",optional:!1,defaultvalue:null}],name:"setDefaultCard",longname:"Bucket.billing.setDefaultCard",scope:"route"},{route:{name:"/api/bucket/:id/payment",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters card_id",optional:!1},{type:"200",description:"succesfully retrieved the metadata",optional:!1}],response:[{name:".",type:"object",description:"stripe metadata object",optional:!1,defaultvalue:null}],name:"fetchMetadata",longname:"Bucket.billing.fetchMetadata",scope:"route"},{route:{name:"/api/bucket/:id/payment",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"metadata",type:"object",description:"the metadata you can update",optional:!1,defaultvalue:null},{name:"metadata.vat_number",type:"string",description:"",optional:!0,defaultvalue:null},{name:"metadata.company_name",type:"string",description:"",optional:!0,defaultvalue:null},{name:"metadata.receipt_email",type:"string",description:"",optional:!0,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"400",description:"missing parameters, you need to specify a card",optional:!1},{type:"200",description:"succesfully updated the card",optional:!1}],response:[{name:"data",type:"array",description:"stripe customer metadata object",optional:!1,defaultvalue:null}],name:"updateMetadata",longname:"Bucket.billing.updateMetadata",scope:"route"}],alert:[{route:{name:"/api/bucket/:id/alerts",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"name",type:"string",description:"Alert name",optional:!1,defaultvalue:null},{name:"type",type:"string",description:"Should be `metric` or `event`",optional:!1,defaultvalue:null},{name:"initiator",type:"string",description:"Should be metric name or event name",optional:!1,defaultvalue:null},{name:"options",type:"object",description:"",optional:!1,defaultvalue:null},{name:"options.operator",type:"string",description:"Should be `>`, `<`, `=`, `>=` or `<=`",optional:!0,defaultvalue:null},{name:"options.threshold",type:"number",description:"Value to reach to send an alert",optional:!0,defaultvalue:null},{name:"options.act",type:"string",description:"Should be `always`, `first` or `diff`",optional:!0,defaultvalue:null},{name:"options.timerange",type:"number",description:"Timerange to check, in seconds",optional:!0,defaultvalue:null},{name:"scope",type:"object",description:"",optional:!1,defaultvalue:null},{name:"scope.apps",type:"object",description:"Array of strings with apps name (can be empty)",optional:!0,defaultvalue:null},{name:"scope.servers",type:"object",description:"Array of strings with servers name (can be empty)",optional:!0,defaultvalue:null},{name:"actions",type:"object",description:"List of actions to trigger",optional:!1,defaultvalue:null},{name:"actions[].type",type:"string",description:"Type of action",optional:!0,defaultvalue:null},{name:"actions[].params",type:"object",description:"Params for action",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"missing parameters",optional:!1},{type:"200",description:"successfuly created alert",optional:!1}],name:"create",longname:"Bucket.alert.create",scope:"route"},{route:{name:"/api/bucket/:id/alerts/:alert",type:"DELETE"},params:[{name:":id",type:"string",description:"bucket id",optional:!1},{name:":id",type:"string",description:"alert id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"204",description:"successfuly deleted alert",optional:!1}],name:"delete",longname:"Bucket.alert.delete",scope:"route",authentication:!1},{route:{name:"/api/bucket/:id/alerts/",type:"GET"},params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"list all alerts",optional:!1}],name:"list",longname:"Bucket.alert.list",scope:"route",authentication:!1},{route:{name:"/api/bucket/:id/alerts/:alert",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"name",type:"string",description:"Alert name",optional:!0,defaultvalue:null},{name:"type",type:"string",description:"Should be `metric` or `event`",optional:!0,defaultvalue:null},{name:"initiator",type:"string",description:"Should be metric name or event name",optional:!0,defaultvalue:null},{name:"options",type:"object",description:"",optional:!0,defaultvalue:null},{name:"options.operator",type:"string",description:"Should be `>`, `<`, `=`, `<=` or `>=`",optional:!0,defaultvalue:null},{name:"options.threshold",type:"number",description:"Value to reach to send an alert",optional:!0,defaultvalue:null},{name:"options.timerange",type:"number",description:"Timerange to check, in seconds",optional:!0,defaultvalue:null},{name:"scope",type:"object",description:"",optional:!0,defaultvalue:null},{name:"scope.apps",type:"array",description:"Array of strings with apps name (can be empty)",optional:!0,defaultvalue:null},{name:"scope.servers",type:"array",description:"Array of strings with servers name (can be empty)",optional:!0,defaultvalue:null},{name:"actions",type:"array",description:"List of actions to trigger",optional:!0,defaultvalue:null},{name:"actions[].type",type:"string",description:"Type of action",optional:!0,defaultvalue:null},{name:"actions[].params",type:"object",description:"Params for action",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"missing parameters",optional:!1},{type:"200",description:"successfuly created alert",optional:!1}],name:"updateAlert",longname:"Bucket.alert.updateAlert",scope:"route"},{route:{name:"/api/bucket/:id/alerts/update",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"triggers",type:"object",description:"",optional:!1,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"missing triggers parameter",optional:!1},{type:"200",description:"succesfully update triggers",optional:!1}],response:[{name:"triggers",type:"object",description:"new triggers object",optional:!1,defaultvalue:null}],name:"update",longname:"Bucket.alert.update",scope:"route"},{route:{name:"/api/bucket/:id/alerts/updateSlack",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"slack",type:"object",description:"",optional:!1,defaultvalue:null},{name:"slack.active",type:"boolean",description:"",optional:!0,defaultvalue:null},{name:"slack.url",type:"boolean",description:"needed if active is set to true",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"missing triggers parameter",optional:!1},{type:"200",description:"succesfully update triggers",optional:!1}],response:[{name:"bucket",type:"object",description:"",optional:!1,defaultvalue:null}],name:"updateSlack",longname:"Bucket.alert.updateSlack",scope:"route"},{route:{name:"/api/bucket/:id/alerts/updateWebhooks",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"webhooks",type:"object",description:"",optional:!1,defaultvalue:null},{name:"webhooks.active",type:"boolean",description:"",optional:!0,defaultvalue:null},{name:"webhooks.url",type:"boolean",description:"needed if active is set to true",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"missing triggers parameter",optional:!1},{type:"200",description:"succesfully update triggers",optional:!1}],response:[{name:"bucket",type:"object",description:"",optional:!1,defaultvalue:null}],name:"updateWebhooks",longname:"Bucket.alert.updateWebhooks",scope:"route"}],server:[],default:[{route:{name:"/api/bucket/:id/feedback",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"feedback",type:"string",description:"the feedback text",optional:!1,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"missing feedback field",optional:!1},{type:"200",description:"succesfully registered the feedback",optional:!1}],response:[{name:"feedback",type:"string",description:"the feedback that hasn't been registered",optional:!1,defaultvalue:null}],name:"sendFeedback",longname:"Bucket.sendFeedback",scope:"route"},{name:"retrieveUsers",route:{name:"/api/bucket/:id/users_authorized",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved bucket's members",optional:!1}],response:[{name:".",type:"array",description:"a array of user containing their email, username and roles",optional:!1,defaultvalue:null}],longname:"Bucket.retrieveUsers",scope:"route"},{name:"currentRole",route:{name:"/api/bucket/:id/current_role",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"200",description:"succesfully retrieved the use role",optional:!1}],response:[{name:"role",type:"string",description:"the user role",optional:!1,defaultvalue:null}],longname:"Bucket.currentRole",scope:"route"},{route:{name:"/api/bucket/:id/manage_notif",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"email",type:"string",description:"the user email",optional:!1,defaultvalue:null},{name:"state",type:"string",description:"the notification state you want to set for that user\n (either 'email' or 'nonde)",optional:!1,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"404",description:"user not found",optional:!1}],response:[{name:".",type:"array",description:"array of state for each user",optional:!1,defaultvalue:null}],name:"setNotificationState",longname:"Bucket.setNotificationState",scope:"route"},{name:"inviteUser",route:{name:"/api/bucket/:id/add_user",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"email",type:"string",description:"the email of the user",optional:!1,defaultvalue:null}],code:[{type:"400",description:"missing/invalid parameters",optional:!1},{type:"403",description:"you cant invit more users because you hit the bucket limit",optional:!1},{type:"200",description:"succesfully invited the user (either directly or by email)",optional:!1}],response:[{name:"invitations",type:"array",description:"the list of invitations actually active",optional:!1,defaultvalue:null}],longname:"Bucket.inviteUser",scope:"route"},{route:{name:"/api/bucket/:id/invitation",type:"DELETE"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],query:[{name:"email",type:"string",description:"the email of the invitation you want to delete",optional:!0,defaultvalue:null}],code:[{type:"400",description:"invalid/missing parameters",optional:!1},{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully deleted the invitation",optional:!1}],response:[{name:"invitations",type:"array",description:"the list of invitations actually active",optional:!1,defaultvalue:null}],name:"removeInvitation",longname:"Bucket.removeInvitation",scope:"route"},{route:{name:"/api/bucket/:id/remove_user",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"email",type:"string",description:"the email of the user you want to remove",optional:!1,defaultvalue:null}],code:[{type:"400",description:"missing/invalid parameters",optional:!1},{type:"404",description:"user not found",optional:!1},{type:"403",description:"impossible to remove the owner from the bucket",optional:!1},{type:"500",description:"database error",optional:!1}],response:[{name:".",type:"array",description:"a array of user containing their email, username and roles",optional:!1,defaultvalue:null}],name:"removeUser",longname:"Bucket.removeUser",scope:"route"},{route:{name:"/api/bucket/:id/promote_user",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"email",type:"string",description:"the email of the user you want to change the role",optional:!1,defaultvalue:null},{name:"role",type:"string",description:"the role you want to set",optional:!1,defaultvalue:null}],code:[{type:"400",description:"invalid/missing parameters",optional:!1},{type:"404",description:"user not found",optional:!1},{type:"403",description:"impossible to set the role of the owner",optional:!1}],response:[{name:".",type:"array",description:"a array of user containing their email, username and roles",optional:!1,defaultvalue:null}],name:"setUserRole",longname:"Bucket.setUserRole",scope:"route"},{name:"retrieveAll",route:{name:"/api/bucket/",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully fetched bucket",optional:!1}],response:[{name:".",type:"array",description:"array of buckets",optional:!1,defaultvalue:null}],longname:"Bucket.retrieveAll",scope:"route"},{name:"create",route:{name:"/api/bucket/create_classic",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],body:[{name:"name",type:"string",description:"the name of the bucket",optional:!1,defaultvalue:null},{name:"comment",type:"string",description:"any comments that will be written under the bucket name",optional:!0,defaultvalue:null},{name:"app_url",type:"string",description:"",optional:!0,defaultvalue:null}],code:[{type:"400",description:"missing parameters",optional:!1},{type:"403",description:"you cant create any more bucket",optional:!1},{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully created a bucket",optional:!1}],response:[{name:"bucket",type:"object",description:"the created bucket",optional:!1,defaultvalue:null}],longname:"Bucket.create",scope:"route"},{deprecated:!0,route:{name:"/api/bucket/:id/start_trial",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"400",description:"can't claim trial",optional:!1},{type:"200",description:"trial launched",optional:!1}],response:[{name:"duration",type:"string",description:"the duration of the trial",optional:!1,defaultvalue:null},{name:"plan",type:"string",description:"the plan of the trial",optional:!1,defaultvalue:null}],name:"claimTrial",longname:"Bucket.claimTrial",scope:"route"},{deprecated:!0,name:"upgrade",route:{name:"/api/bucket/:id/upgrade",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"plan",type:"string",description:"name of the plan to upgrade to",optional:!1,defaultvalue:null},{name:"stripe_token",type:"string",description:"a card token created by stripe",optional:!0,defaultvalue:null},{name:"coupon_id",type:"string",description:"the id of the stripe coupon",optional:!0,defaultvalue:null}],code:[{type:"400",description:"missing/invalid parameters",optional:!1},{type:"403",description:"need a credit card OR not allowed to subscribe to the plan",optional:!1},{type:"500",description:"stripe/database error",optional:!1},{type:"200",description:"succesfully upgraded",optional:!1}],response:[{name:"bucket",type:"object",description:"the bucket object",optional:!1,defaultvalue:null},{name:"subscription",type:"object",description:"the subscription object attached to the subscription",optional:!1,defaultvalue:null}],longname:"Bucket.upgrade",scope:"route"},{name:"retrieve",route:{name:"/api/bucket/:id",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"200",description:"succesfully retrieved the bucket",optional:!1}],response:[{name:".",type:"object",description:"bucket object",optional:!1,defaultvalue:null}],longname:"Bucket.retrieve",scope:"route"},{route:{name:"/api/bucket/:id",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"name",type:"string",description:"",optional:!0,defaultvalue:null},{name:"comment",type:"string",description:"",optional:!0,defaultvalue:null},{name:"app_url",type:"string",description:"",optional:!0,defaultvalue:null},{name:"configuration",type:"string",description:"",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"missing parameters",optional:!1}],response:[{name:".",type:"object",description:"bucket object",optional:!1,defaultvalue:null}],name:"update",longname:"Bucket.update",scope:"route"},{name:"retrieveServers",route:{name:"/api/bucket/:id/meta_servers",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved the server's metadata",optional:!1}],response:[{name:".",type:"array",description:"servers metadata",optional:!1,defaultvalue:null}],longname:"Bucket.retrieveServers",scope:"route"},{deprecated:!0,name:"getSubscription",route:{name:"/api/bucket/:id/subscription",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"404",description:"the bucket doesnt have any subscription",optional:!1},{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved the subscription",optional:!1}],response:[{name:".",type:"object",description:"subscription object",optional:!1,defaultvalue:null}],longname:"Bucket.getSubscription",scope:"route"},{route:{name:"/api/bucket/:id",type:"DELETE"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully deleted the bucket",optional:!1}],response:[{name:".",type:"object",description:"the deleted bucket",optional:!1,defaultvalue:null}],name:"destroy",longname:"Bucket.destroy",scope:"route"},{route:{name:"/api/bucket/:id/transfer_ownership",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"new_owner",type:"string",description:"the wanted owner's email",optional:!1,defaultvalue:null}],code:[{type:"400",description:"Missing/invalid parameters",optional:!1},{type:"404",description:"user not found",optional:!1},{type:"403",description:"the new owner need to have a active credit card",optional:!1},{type:"200",description:"succesfully transfered the bucket, old owner is now admin",optional:!1}],response:[{name:".",type:"object",description:"bucket object",optional:!1,defaultvalue:null}],name:"transferOwnership",longname:"Bucket.transferOwnership",scope:"route"},{deprecated:!0,route:{name:"/api/bucket/:id/payment/charges",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"400",description:"Missing/invalid parameters",optional:!1},{type:"200",description:"succesfully transfered the bucket, old owner is now admin",optional:!1}],response:[{name:".",type:"array",description:"array of invoices",optional:!1,defaultvalue:null}],name:"retrieveCharges",longname:"Bucket.retrieveCharges",scope:"route"},{route:{name:"/api/bucket/:id/data/deleteServer",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"server_name",type:"string",description:"the name of server",optional:!1,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"406",description:"require an action before delete",optional:!1},{type:"400",description:"missing or invalid parameters",optional:!1},{type:"200",description:"successfully deleted",optional:!1}],response:[{name:"success",type:"boolean",description:"can be true or false",optional:!1,defaultvalue:null},{name:"msg",type:"string",description:"response",optional:!1,defaultvalue:null}],name:"deleteServer",longname:"Bucket.deleteServer",scope:"route"}]},data:{status:[{route:{name:"/api/bucket/:id/data/status",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],tags:[{originalTitle:"reponse",title:"reponse",text:"{Array} . array of servers status",value:"{Array} . array of servers status",optional:!1,type:null}],name:"retrieve",longname:"Data.status.retrieve",scope:"route"}],heapdump:[{route:{name:"/api/bucket/:id/data/heapdump/:filename",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1},{name:":filename",type:"string",description:"filename",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"invalid parameters",optional:!1}],response:[{name:".",type:"file",description:"return a file",optional:!1,defaultvalue:null}],name:"retrieve",longname:"Data.heapdump.retrieve",scope:"route"}],events:[{route:{name:"/api/bucket/:id/data/events",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"event_name",type:"string",description:"the event name to retrieve",optional:!1,defaultvalue:null},{name:"app_name",type:"string",description:"filter events by app source",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"filter events by server source",optional:!0,defaultvalue:null},{name:"limit",type:"number",description:"limit the number of events to retrieve",optional:!0,defaultvalue:100},{name:"offset",type:"number",description:"offset research by X",optional:!0,defaultvalue:0}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"invalid parameters",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of events",optional:!1,defaultvalue:null}],name:"retrieve",longname:"Data.events.retrieve",scope:"route"},{route:{name:"/api/bucket/:id/data/events/eventsKeysByApp",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"invalid parameters",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of object representing events emitted for each application name",optional:!1,defaultvalue:null}],name:"retrieveMetadatas",longname:"Data.events.retrieveMetadatas",scope:"route"},{route:{name:"/api/bucket/:id/data/events/stats",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"event_name",type:"string",description:"the event name to retrieve",optional:!1,defaultvalue:null},{name:"app_name",type:"string",description:"filter events by app source",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"filter events by server source",optional:!0,defaultvalue:null},{name:"days",type:"number",description:"limit the number of days of data",optional:!0,defaultvalue:2},{name:"interval",type:"string",description:"interval of time between two point",optional:!0,defaultvalue:"minute"}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"invalid parameters",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of point (each point is one dimensional array, X are at 0 and Y at 1)",optional:!1,defaultvalue:null}],name:"retrieveHistogram",longname:"Data.events.retrieveHistogram",scope:"route"},{route:{name:"/api/bucket/:id/data/events/delete_all",type:"DELETE"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully deleted data",optional:!1}],response:[{name:".",type:"array",description:"array of object representing events emitted for each application name",optional:!1,defaultvalue:null}],name:"deleteAll",longname:"Data.events.deleteAll",scope:"route"}],exceptions:[{route:{name:"/api/bucket/:id/data/exceptions",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"server_name",type:"string",description:"filter exceptions by server source",optional:!0,defaultvalue:null},{name:"app_name",type:"string",description:"filter exceptions by app source",optional:!0,defaultvalue:null},{name:"before",type:"string",description:"filter out exceptions older than X (in minutes)",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of exceptions",optional:!1,defaultvalue:null}],name:"retrieve",longname:"Data.exceptions.retrieve",scope:"route"},{route:{name:"/api/bucket/:id/data/exceptions/summary",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of object containing exceptions for each application for each server",optional:!1,defaultvalue:null}],name:"retrieveSummary",longname:"Data.exceptions.retrieveSummary",scope:"route"},{route:{name:"/api/bucket/:id/data/exceptions/delete_all",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],name:"deleteAll",longname:"Data.exceptions.deleteAll",scope:"route"},{route:{name:"/api/bucket/:id/data/exceptions/delete",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"identifier",type:"string",description:"exception identifier",optional:!0,defaultvalue:null},{name:"app_name",type:"string",description:"the application on which exception happened",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"the server on which exception happened",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"400",description:"missing/invalid parameters",optional:!1}],response:[{name:".",type:"array",description:"array of deleted exceptions",optional:!1,defaultvalue:null}],name:"delete",longname:"Data.exceptions.delete",scope:"route"}],issues:[{route:{name:"/api/bucket/:id/data/issues",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"server_name",type:"string",description:"filter exceptions by server source",optional:!0,defaultvalue:null},{name:"app_name",type:"string",description:"filter exceptions by app source",optional:!1,defaultvalue:null},{name:"before",type:"string",description:"exclude exceptions older than 'before' minutes",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of exceptions",optional:!1,defaultvalue:null}],name:"retrieve",longname:"Data.issues.retrieve",scope:"route"},{route:{name:"/api/bucket/:id/data/issues/histogram",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"string",description:"a specific app name",optional:!0,defaultvalue:null},{name:"start",type:"string",description:"ignore issue before this date",optional:!0,defaultvalue:null},{name:"identifier",type:"string",description:"a specific issue identifier",optional:!0,defaultvalue:null},{name:"interval",type:"string",description:"ignore issue before this date",optional:!0,defaultvalue:null},{name:"end",type:"string",description:"ignore issue after this date",optional:!0,defaultvalue:null},{name:"includeFixed",type:"boolean",description:"choose to ignore or not the fixed occurences",optional:!0,defaultvalue:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of object containing exceptions for each application for each server",optional:!1,defaultvalue:null}],name:"retrieveHistogram",longname:"Data.issues.retrieveHistogram",scope:"route"},{route:{name:"/api/bucket/:id/data/issues/ocurrences",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"identifier",type:"object",description:"find occurence by using an issue identifier",optional:!0,defaultvalue:null},{name:"occurrence_id",type:"object",description:"find ocurrence by his id",optional:!0,defaultvalue:null},{name:"includeFixed",type:"boolean",description:"choose to ignore or not the fixed occurences",optional:!0,defaultvalue:!1},{name:"limit",type:"number",description:"limit",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of object containing ocurrences",optional:!1,defaultvalue:null}],name:"findOccurences",longname:"Data.issues.findOccurences",scope:"route"},{route:{name:"/api/bucket/:id/data/issues/search",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"message",type:"string",description:"find occurence that match this message",optional:!1,defaultvalue:null},{name:"includeFixed",type:"boolean",description:"choose to ignore or not the fixed occurences",optional:!0,defaultvalue:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of object containing exceptions for each application for each server",optional:!1,defaultvalue:null}],name:"search",longname:"Data.issues.search",scope:"route"},{route:{name:"/api/bucket/:id/data/issues",type:"DELETE"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],query:[{name:"app_name",type:"string",description:"an specific application to delete application",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],name:"deleteAll",longname:"Data.issues.deleteAll",scope:"route"},{route:{name:"/api/bucket/:id/data/issues/:identifier",type:"DELETE"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1},{name:":identifier",type:"string",description:"the identifier of issue that you want to delete",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"400",description:"missing/invalid parameters",optional:!1}],response:[{name:".",type:"array",description:"array of deleted exceptions",optional:!1,defaultvalue:null}],name:"delete",longname:"Data.issues.delete",scope:"route"}],processes:[{route:{name:"/api/bucket/:id/data/processEvents",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"string",description:"filter events by app source",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"filter events by server source",optional:!0,defaultvalue:null},{name:"before",type:"string",description:"filter out events that are after X minute",optional:!0,defaultvalue:60}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of process events",optional:!1,defaultvalue:null}],name:"retrieveEvents",longname:"Data.processes.retrieveEvents",scope:"route"},{route:{name:"/api/bucket/:id/data/processEvents/deployments",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"string",description:"filter events by app source",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"filter events by server source",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of deployments",optional:!1,defaultvalue:null}],name:"retrieveDeployments",longname:"Data.processes.retrieveDeployments",scope:"route"}],metrics:[{route:{name:"/api/bucket/:id/data/metrics/aggregations",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"aggregations",type:"object",description:"array of aggregations to compute",optional:!1,defaultvalue:null},{name:"aggregations[].start",type:"date",description:"oldest documents to aggregate on",optional:!0,defaultvalue:null},{name:"aggregations[].end",type:"date",description:"newest documents to aggregate on",optional:!0,defaultvalue:null},{name:"aggregations[].name",type:"string",description:"the name of metric to compute the graph",optional:!0,defaultvalue:null},{name:"aggregations[].servers",type:"array",description:"filter source server to aggregate on",optional:!0,defaultvalue:null},{name:"aggregations[].apps",type:"array",description:"filter source applications to aggregate on",optional:!0,defaultvalue:null},{name:"aggregations[].name",type:"date",description:"the name of metric to compute the graph",optional:!0,defaultvalue:null},{name:"aggregations[].types",type:"array",description:"type of aggregation",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"aggregations",optional:!1,defaultvalue:null}],examples:["km.data.metrics.retrieveAggregations(bucket._id, {\n  aggregations: [\n    {\n     'end': 'now-1d',\n     'apps': ['INTERACTION', 'WEB-API', 'WORKER'],\n     'types': ['histogram', 'apps', 'servers'],\n     'name': 'HTTP'\n    }\n  ]\n})"],name:"retrieveAggregations",longname:"Data.metrics.retrieveAggregations",scope:"route"},{route:{name:"/api/bucket/:id/data/metrics/histogram",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"string",description:"filter probes by app source",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"filter probes by server source",optional:!0,defaultvalue:null},{name:"interval",type:"string",description:"interval of time between two point",optional:!0,defaultvalue:"minute"},{name:"before",type:"string",description:"filter out probes that are after X minute",optional:!0,defaultvalue:60}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:"server_name",type:"object",description:"",optional:!1,defaultvalue:null},{name:"server_name.app_name",type:"object",description:"",optional:!1,defaultvalue:null},{name:"server_name.app_name.metrics",type:"object",description:"",optional:!1,defaultvalue:null},{name:"server_name.app_name.metrics.agg_type",type:"string",description:"the type of aggregation for this probe",optional:!1,defaultvalue:null},{name:"server_name.app_name.metrics_name.timestamps_and_stats",type:"array",description:"array of point",optional:!1,defaultvalue:null}],name:"retrieveHistogram",longname:"Data.metrics.retrieveHistogram",scope:"route"},{route:{name:"/api/bucket/:id/data/metrics",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"string",description:"filter metrics by app source",optional:!1,defaultvalue:null},{name:"server_name",type:"string",description:"filter metrics by server source",optional:!0,defaultvalue:null},{name:"before",type:"string",description:"filter out metrics that are after X minute",optional:!0,defaultvalue:720}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],name:"retrieveMetadatas",longname:"Data.metrics.retrieveMetadatas",scope:"route"}],transactions:[{route:{name:"/api/bucket/:id/data/transactions/v2/histogram",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"string",description:"filter transactions by app source",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"filter transactions by server source",optional:!0,defaultvalue:null},{name:"interval",type:"string",description:"interval of time between two point",optional:!0,defaultvalue:"minute"},{name:"before",type:"string",description:"filter out transactions that are after X minute",optional:!0,defaultvalue:60}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of times series containing points",optional:!1,defaultvalue:null}],name:"retrieveHistogram",longname:"Data.transactions.retrieveHistogram",scope:"route"},{route:{name:"/api/bucket/:id/data/transactions/v2/summary",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"string",description:"filter transactions by app source",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"filter transactions by server source",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:"server_name",type:"object",description:"",optional:!1,defaultvalue:null},{name:"server_name.app_name",type:"object",description:"transaction object",optional:!1,defaultvalue:null}],name:"retrieveSummary",longname:"Data.transactions.retrieveSummary",scope:"route"},{route:{name:"/api/bucket/:id/data/transactions/v2/delete",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],query:[{name:"app_name",type:"string",description:"filter transactions by app source",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"filter transactions by server source",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:"server_name",type:"object",description:"",optional:!1,defaultvalue:null},{name:"server_name.app_name",type:"object",description:"transaction object",optional:!1,defaultvalue:null}],name:"delete",longname:"Data.transactions.delete",scope:"route"}],dependencies:[{route:{name:"/api/bucket/:id/data/dependencies/",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"string",description:"the application name",optional:!1,defaultvalue:null},{name:"server_name",type:"string",description:"filter by server name",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"400",description:"missing parameters",optional:!1}],response:[{name:".",type:"array",description:"recorded dependencies",optional:!1,defaultvalue:null}],examples:["km.data.dependencies.retrieve(bucket._id, {\n   app_name: 'my_api'\n })"],name:"retrieve",longname:"Data.dependencies.retrieve",scope:"route"}],outliers:[{route:{name:"/api/bucket/:id/data/outliers/",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"string",description:"the application name",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"filter by server name",optional:!0,defaultvalue:null},{name:"start",type:"string",description:"only search outlier newer than <start>",optional:!0,defaultvalue:null},{name:"end",type:"string",description:"only search outlier older than <end>",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"400",description:"missing parameters",optional:!1}],response:[{name:".",type:"array",description:"recorded dependencies",optional:!1,defaultvalue:null}],examples:["km.data.outliers.retrieve(bucket._id, {\n   app_name: 'my_api'\n })"],name:"retrieve",longname:"Data.outliers.retrieve",scope:"route"}],logs:[{route:{name:"/api/bucket/:id/data/logs",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"string",description:"the application name",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"filter by server name",optional:!0,defaultvalue:null},{name:"before",type:"string",description:"only search log oldest than <before>",optional:!0,defaultvalue:null},{name:"after",type:"string",description:"only search log newer than <after>",optional:!0,defaultvalue:null},{name:"size",type:"integer",description:"line limit, default to 100",optional:!0,defaultvalue:null},{name:"from",type:"integer",description:"offset limit",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"400",description:"missing parameters",optional:!1}],response:[{name:".",type:"array",description:"recorded dependencies",optional:!1,defaultvalue:null}],examples:["km.data.logs.retrieve(bucket._id, {\n   app_name: 'my_api'\n })"],name:"retrieve",longname:"Data.logs.retrieve",scope:"route"},{route:{name:"/api/bucket/:id/data/logs/histogram",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"app_name",type:"object",description:"a specific app name",optional:!0,defaultvalue:null},{name:"start",type:"object",description:"ignore log before this date",optional:!0,defaultvalue:null},{name:"interval",type:"object",description:"ignore log before this date",optional:!0,defaultvalue:null},{name:"end",type:"object",description:"ignore log after this date",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1}],response:[{name:".",type:"array",description:"array of object containing exceptions for each application for each server",optional:!1,defaultvalue:null}],name:"retrieveHistogram",longname:"Data.logs.retrieveHistogram",scope:"route"}]},dashboard:[{route:{name:"/api/bucket/:id/dashboard/",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"400",description:"Invalid params",optional:!1}],response:[{name:".",type:"array",description:"array of servers status",optional:!1,defaultvalue:null}],name:"retrieveAll",longname:"Dashboard.retrieveAll",scope:"route"},{route:{name:"/api/bucket/:id/dashboard/:dashid",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1},{name:":dashid",type:"string",description:"dashboard id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"404",description:"dashboard not found",optional:!1},{type:"400",description:"Invalid params",optional:!1}],response:[{name:".",type:"array",description:"array of dashboards",optional:!1,defaultvalue:null}],name:"retrieve",longname:"Dashboard.retrieve",scope:"route"},{route:{name:"/api/bucket/:id/dashboard/:dashid",type:"DELETE"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1},{name:":dashid",type:"string",description:"dashboard id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully deleted dashboard",optional:!1},{type:"400",description:"Invalid params",optional:!1},{type:"404",description:"dashboard not found",optional:!1}],response:[{name:".",type:"array",description:"array of dashboards",optional:!1,defaultvalue:null}],name:"remove",longname:"Dashboard.remove",scope:"route"},{route:{name:"/api/bucket/:id/dashboard/:dashId",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1},{name:":dashId",type:"string",description:"dashboard id",optional:!1}],body:[{name:"name",type:"string",description:"the name of the dashboard",optional:!1,defaultvalue:null},{name:"children",type:"object",description:"the list of component that compose the dashboard",optional:!1,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"404",description:"dashboard not found",optional:!1},{type:"400",description:"Invalid params",optional:!1}],response:[{name:".",type:"array",description:"array of servers status",optional:!1,defaultvalue:null}],name:"update",longname:"Dashboard.update",scope:"route"},{route:{name:"/api/bucket/:id/dashboard/",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"name",type:"string",description:"the name of the dashboard",optional:!1,defaultvalue:null},{name:"children",type:"object",description:"the list of component that compose the dashboard",optional:!1,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully created dashboard",optional:!1},{type:"400",description:"Invalid params",optional:!1}],response:[{name:".",type:"dashboard",description:"complete dashboard object from database",optional:!1,defaultvalue:null}],name:"create",longname:"Dashboard.create",scope:"route"}],orchestration:[{route:{name:"/api/bucket/:id/balance",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"balancing error",optional:!1},{type:"403",description:"already on new node or not premium",optional:!1},{type:"200",description:"succesfully balanced the bucket",optional:!1}],response:[{name:"migration",type:"object",description:"is equal true if succesfull",optional:!1,defaultvalue:null}],name:"selfSend",longname:"Orchestration.selfSend",scope:"route"}],actions:[{route:{name:"/api/bucket/:id/actions/trigger",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"server_name",type:"string",description:"the name of the server",optional:!1,defaultvalue:null},{name:"process_id",type:"number",description:"the id of the process",optional:!1,defaultvalue:null},{name:"action_name",type:"string",description:"the name of the action to trigger",optional:!1,defaultvalue:null},{name:"opts",type:"object",description:"any specific options to be passed to the function",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully run the action",optional:!1}],response:[{name:"success",type:"boolean",description:"succesully sended the action to PM2",optional:!1,defaultvalue:null}],name:"triggerAction",longname:"Actions.triggerAction",scope:"route"},{route:{name:"/api/bucket/:id/actions/triggerPM2",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"server_name",type:"string",description:"the name of the server",optional:!1,defaultvalue:null},{name:"method_name",type:"string",description:"the name of the pm2 method to trigger",optional:!1,defaultvalue:null},{name:"app_name",type:"string",description:"the name of the application",optional:!1,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"400",description:"failed action",optional:!1},{type:"200",description:"succesfully run the action",optional:!1}],response:[{name:"success",type:"boolean",description:"succesully sended the action to PM2",optional:!1,defaultvalue:null}],name:"triggerPM2Action",longname:"Actions.triggerPM2Action",scope:"route"},{route:{name:"/api/bucket/:id/actions/triggerScopedAction",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"server_name",type:"string",description:"the name of the server",optional:!1,defaultvalue:null},{name:"action_name",type:"string",description:"the name of the pm2 method to trigger",optional:!1,defaultvalue:null},{name:"app_name",type:"string",description:"the name of the application",optional:!1,defaultvalue:null},{name:"pm_id",type:"number",description:"the id of the process",optional:!1,defaultvalue:null},{name:"opts",type:"object",description:"custom parameters to give to the action",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully run the action",optional:!1}],response:[{name:".",type:"object",description:"the action sended to the process",optional:!1,defaultvalue:null}],name:"triggerScopedAction",longname:"Actions.triggerScopedAction",scope:"route"},{route:{name:"/api/bucket/:id/actions/listScopedActions",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"uuid",type:"uuid",description:"action uuid",optional:!0,defaultvalue:null},{name:"action_name",type:"string",description:"name of the action",optional:!0,defaultvalue:null},{name:"app_name",type:"string",description:"app name where to execute the action",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"on which server the application is",optional:!0,defaultvalue:null},{name:"status",type:"boolean",description:"is the action finished or not",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully run the action",optional:!1}],response:[{name:".",type:"object",description:"the action sended to the process",optional:!1,defaultvalue:null}],name:"retrieve",longname:"Actions.retrieve",scope:"route"},{route:{name:"/api/bucket/:id/actions/deleteScopedAction",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"bucket id",optional:!1}],body:[{name:"uuid",type:"string",description:"action uuid",optional:!0,defaultvalue:null},{name:"action_name",type:"string",description:"name of the action",optional:!0,defaultvalue:null},{name:"app_name",type:"string",description:"app name where to execute the action",optional:!0,defaultvalue:null},{name:"server_name",type:"string",description:"on which server the application is",optional:!0,defaultvalue:null},{name:"status",type:"boolean",description:"is the action finished or not",optional:!0,defaultvalue:null},{name:"beforeDate",type:"date",description:"created before this date",optional:!0,defaultvalue:null},{name:"afterDate",type:"date",description:"created after this date",optional:!0,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully run the action",optional:!1}],response:[{name:".",type:"object",description:"the action sended to the process",optional:!1,defaultvalue:null}],name:"remove",longname:"Actions.remove",scope:"route"}],auth:[{name:"retrieveToken",route:{name:"/api/oauth/token",type:"POST"},service:{name:"OAUTH"},body:[{name:"client_id",type:"string",description:"the public id of your oauth application",optional:!1,defaultvalue:null},{name:"refresh_token",type:"string",description:"refresh token you retrieved via authorize endpoint",optional:!1,defaultvalue:null},{name:"grant_type",type:"string",description:"",optional:!1,defaultvalue:"refresh_token"}],code:[{type:"400",description:"invalid parameters (missing or not correct)",optional:!1}],response:[{name:"access_token",type:"string",description:"a fresh access_token",optional:!1,defaultvalue:null},{name:"refresh_token",type:"string",description:"the refresh token you used",optional:!1,defaultvalue:null},{name:"expire_at",type:"string",description:"UTC date at which the token will be considered\n as invalid",optional:!1,defaultvalue:null},{name:"token_type",type:"string",description:"the type of token to use, for now its always Bearer",optional:!1,defaultvalue:null}],longname:"Auth.retrieveToken",scope:"route",authentication:!1},{name:"requestNewPassword",route:{name:"/api/oauth/reset_password",type:"POST"},service:{name:"OAUTH"},body:[{name:"email",type:"string",description:"email of the account that want a password reset",optional:!1,defaultvalue:null}],code:[{type:"500",description:"the database failed to register the token to reset the mail",optional:!1},{type:"400",description:"missing parameters",optional:!1},{type:"404",description:"no user account where found with the provided email",optional:!1},{type:"200",description:"the mail has been sent to the provided email",optional:!1}],longname:"Auth.requestNewPassword",scope:"route",authentication:!1},{route:{name:"/api/oauth/register",type:"GET"},service:{name:"OAUTH"},body:[{name:"username",type:"string",description:"",optional:!1,defaultvalue:null},{name:"email",type:"string",description:"",optional:!1,defaultvalue:null},{name:"password",type:"string",description:"",optional:!1,defaultvalue:null},{name:"password_confirmation",type:"string",description:"",optional:!1,defaultvalue:null},{name:"role",type:"string",description:"job title in user company",optional:!0,defaultvalue:null},{name:"company",type:"string",description:"company name",optional:!0,defaultvalue:null},{name:"accept_terms",type:"integer",description:"",optional:!1,defaultvalue:null}],code:[{type:"500",description:"either the registeration of new user is disabled or\nthe database failed to register the user",optional:!1},{type:"409",description:"the user field are already used by another user",optional:!1},{type:"200",description:"the user has been created",optional:!1}],response:[{name:"user",type:"object",description:"user model",optional:!1,defaultvalue:null},{name:"access_token",type:"object",description:"access token issued for the user",optional:!1,defaultvalue:null},{name:"refreshToken",type:"object",description:"refresh token issued for the user",optional:!1,defaultvalue:null}],name:"register",longname:"Auth.register",scope:"route",authentication:!1},{route:{name:"/api/oauth/revoke",type:"POST"},service:{name:"OAUTH"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"404",description:"token not found",optional:!1},{type:"500",description:"database error",optional:!1},{type:"200",description:"the token has been succesfully deleted,\n if there was access token generated with this token, they\n have been deleted too",optional:!1}],name:"revoke",longname:"Auth.revoke",scope:"route"}],misc:[{route:{name:"/api/misc/release/pm2",type:"GET"},code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"400",description:"Invalid params",optional:!1}],response:[{name:"pm2_version",type:"string",description:"latest version",optional:!1,defaultvalue:null}],name:"retrievePM2Version",longname:"Misc.retrievePM2Version",scope:"route",authentication:!1},{route:{name:"/api/misc/release/nodejs/:version",type:"GET"},params:[{name:":version",type:"string",description:"semver version range",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"400",description:"Invalid params",optional:!1}],response:[{name:".",type:"array",description:"array of releases matching the range requested",optional:!1,defaultvalue:null}],name:"retrieveNodeRelease",longname:"Misc.retrieveNodeRelease",scope:"route",authentication:!1},{route:{name:"/api/misc/plans",type:"GET"},code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"succesfully retrieved data",optional:!1},{type:"400",description:"Invalid params",optional:!1}],response:[{name:".",type:"object",description:"list of plans keyed by plan name",optional:!1,defaultvalue:null}],name:"retrievePlans",longname:"Misc.retrievePlans",scope:"route",authentication:!1},{route:{name:"/api/misc/stripe/retrieveCoupon",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],body:[{name:"coupon",type:"string",description:"the coupon name",optional:!1,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"200",description:"succesfully retrieved the metadata",optional:!1}],response:[{name:"coupon",type:"object",description:"the coupon object",optional:!1,defaultvalue:null}],name:"retrieveCoupon",longname:"Misc.retrieveCoupon",scope:"route"},{route:{name:"/api/misc/stripe/retrieveCompany",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],body:[{name:"vat_id",type:"string",description:"the vat id of the company",optional:!1,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"200",description:"succesfully retrieved the metadata",optional:!1}],response:[{name:".",type:"object",description:"metadata about company",optional:!1,defaultvalue:null}],name:"retrieveCompany",longname:"Misc.retrieveCompany",scope:"route"},{route:{name:"/api/misc/stripe/retrieveVat",type:"POST"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],body:[{name:"country",type:"string",description:"country code of the user",optional:!0,defaultvalue:null}],code:[{type:"500",description:"stripe error",optional:!1},{type:"200",description:"succesfully retrieved the metadata",optional:!1}],response:[{name:"coupon",type:"object",description:"the coupon object",optional:!1,defaultvalue:null}],name:"retrieveVAT",longname:"Misc.retrieveVAT",scope:"route"}],tokens:[{route:{name:"/api/users/token/",type:"GET"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],code:[{type:"500",description:"database error",optional:!1},{type:"200",description:"successfully retrieved",optional:!1}],response:[{name:".",type:"object",description:"array of tokens",optional:!1,defaultvalue:null}],name:"retrieve",longname:"Tokens.retrieve",scope:"route"},{route:{name:"/api/users/token/:id",type:"DELETE"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],params:[{name:":id",type:"string",description:"token id",optional:!1}],code:[{type:"500",description:"database error",optional:!1},{type:"404",description:"token not found",optional:!1},{type:"200",description:"refresh token has been deleted and all access token that have been created with it",optional:!1}],response:[{name:".",type:"object",description:"array of tokens",optional:!1,defaultvalue:null}],name:"remove",longname:"Tokens.remove",scope:"route"},{route:{name:"/api/users/token/",type:"PUT"},authentication:!0,header:[{name:"Authorization",type:"string",description:"bearer access token issued for the user",optional:!1,defaultvalue:null}],body:[{name:"scope",type:"object",description:"a valid oauth scope",optional:!1,defaultvalue:null}],code:[{type:"409",description:"the otp is already enabled for the user, you can only delete it",optional:!1},{type:"200",description:"the otp can be registered for the account, return the full response",optional:!1}],response:[{name:".",type:"object",description:"generated token",optional:!1,defaultvalue:null}],name:"create",longname:"Tokens.create",scope:"route"}]}},{}],38:[function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var r=e("./strategy");t.exports=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r),o(t,[{key:"removeUrlToken",value:function(e){var t="?access_token="+e+"&token_type=refresh_token",n=window.location.href.replace(t,"");window.history.pushState("","",n)}},{key:"retrieveTokens",value:function(t,n){var o=this,e=function(e){return t.auth.retrieveToken({client_id:o.client_id,refresh_token:e})},r=new URL(window.location);this.response_mode="query"===this.response_mode?"search":this.response_mode;var i=new URLSearchParams(r[this.response_mode]);null!==i.get("access_token")?e(i.get("access_token")).then(function(e){o.removeUrlToken(e.data.refresh_token),localStorage.setItem("km_refresh_token",i.get("access_token"));var t=e.data;return n(null,t)}).catch(n):"undefined"!=typeof localStorage&&null!==localStorage.getItem("km_refresh_token")?e(localStorage.getItem("km_refresh_token")).then(function(e){o.removeUrlToken(e.data.refresh_token);var t=e.data;return n(null,t)}).catch(n):window.location=""+this.oauth_endpoint+this.oauth_query+"&redirect_uri="+window.location}},{key:"deleteTokens",value:function(n){var o=this;return new Promise(function(t,e){n.auth.revoke().then(function(e){return localStorage.removeItem("km_refresh_token"),setTimeout(function(e){window.location=""+o.oauth_endpoint+o.oauth_query},500),t(e)}).catch(e)})}}]),t}()},{"./strategy":40}],39:[function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var r=e("./strategy");t.exports=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r),o(t,[{key:"retrieveTokens",value:function(e,n){if(this._opts.refresh_token&&this._opts.access_token)return n(null,{access_token:this._opts.access_token,refresh_token:this._opts.refresh_token});if(!this._opts.refresh_token||!this._opts.client_id)throw new Error("If you want to use the standalone flow you need to provide either \n        a refresh and access token OR a refresh token and a client id");e.auth.retrieveToken({client_id:this._opts.client_id,refresh_token:this._opts.refresh_token}).then(function(e){var t=e.data;return n(null,t)}).catch(n)}},{key:"deleteTokens",value:function(e){return e.auth.revoke}}]),t}()},{"./strategy":40}],40:[function(n,e,t){"use strict";var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var i=n("../../constants.js"),o=function(){function o(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this._opts=e,this.client_id=e.client_id||e.OAUTH_CLIENT_ID,!this.client_id)throw new Error("You must always provide a application id for any of the strategies");this.scope=e.scope||"all",this.response_mode=e.reponse_mode||"query";var t=null;e&&e.services&&(t=e.services.OAUTH||e.services.API);var n=i.services.OAUTH||i.services.API;this.oauth_endpoint=""+(t||n),"/"===this.oauth_endpoint[this.oauth_endpoint.length-1]&&"/"===i.OAUTH_AUTHORIZE_ENDPOINT[0]&&(this.oauth_endpoint=this.oauth_endpoint.substr(0,this.oauth_endpoint.length-1)),this.oauth_endpoint+=i.OAUTH_AUTHORIZE_ENDPOINT,this.oauth_query="?client_id="+e.client_id+"&response_mode="+this.response_mode+"&response_type=token&scope="+this.scope}return r(o,[{key:"retrieveTokens",value:function(){throw new Error("You need to implement a retrieveTokens function inside your strategy")}},{key:"deleteTokens",value:function(){throw new Error("You need to implement a deleteTokens function inside your strategy")}}],[{key:"implementations",value:function(e){var t={embed:{nodule:n("./embed_strategy"),condition:"node"},browser:{nodule:n("./browser_strategy"),condition:"browser"},standalone:{nodule:n("./standalone_strategy"),condition:null}};return e?t[e]:null}}]),o}();e.exports=o},{"../../constants.js":1,"./browser_strategy":38,"./embed_strategy":28,"./standalone_strategy":39}],41:[function(e,t,n){"use strict";var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var a=e("./utils/validator"),s=e("debug")("kmjs:endpoint");t.exports=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,e)}return o(t,[{key:"build",value:function(r){var i=this;return function(){var e=arguments,t=(new Error).stack.split("\n")[2];return t&&0<t.length&&s("Call to '"+i.route.name+"' from "+t.replace("    at ","")),new Promise(function(n,o){a.extract(i,Array.prototype.slice.call(e)).then(function(e){if(i.service&&i.service.baseURL){var t=i.service.baseURL;t="/"===t[t.length-1]?t.substr(0,t.length-1):t,e.url=t+e.url}r.request(e).then(n,o)}).catch(o)})}}}]),t}()},{"./utils/validator":45,debug:29}],42:[function(i,e,t){"use strict";var n=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var a=i("./namespace"),s=i("../constants"),l=i("./network"),u=i("debug")("kmjs"),o=function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),u("init keymetrics instance"),this.opts=Object.assign(s,e),u("init network client (http/ws)"),this._network=new l(this,this.opts);var t=e&&e.mappings?e.mappings:i("./api_mappings.json");u("Using mappings provided in "+(e&&e.mappings?"options":"package")),u("building namespaces");var n=new a(t,{name:"root",http:this._network,services:this.opts.services});for(var o in u("exposing namespaces"),n)"name"!==o&&"opts"!==o&&(this[o]=n[o]);u("attached namespaces : "+Object.keys(this)),this.realtime=this._network.realtime}return n(r,[{key:"use",value:function(e,t){var n=this;return u("using "+e+" authentication strategy"),this._network.useStrategy(e,t),this.auth.logout=function(){return n._network.oauth_flow.deleteTokens(n)},this}}]),r}();e.exports=o},{"../constants":1,"./api_mappings.json":37,"./namespace":43,"./network":44,debug:29}],43:[function(e,t,n){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var l=e("./endpoint"),u=e("debug")("kmjs:namespace");t.exports=function(){function a(e,t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u("initialization namespace "+t.name),this.name=t.name,this.http=t.http,this.endpoints=[],this.namespaces=[],u("building namespace "+t.name),e){var o=e[n];if("object"!==(void 0===e?"undefined":s(e))||o.route)o.service&&t.services&&t.services[o.service.name]&&(o.service.baseURL=t.services[o.service.name]),this.addEndpoint(new l(o));else{if("default"===n){var r=new a(o,{name:n,http:this.http,services:t.services});for(var i in this.namespaces.push(r),r)"name"!==i&&"opts"!==i&&(this[i]=r[i]);continue}this.addNamespace(new a(o,{name:n,http:this.http,services:t.services}))}}0<this.namespaces.length&&u("namespace "+this.name+" contains namespaces : \n"+this.namespaces.map(function(e){return e.name}).join("\n")+"\n"),0<this.endpoints.length&&u("Namespace "+this.name+" contains endpoints : \n"+this.endpoints.map(function(e){return e.route.name}).join("\n")+"\n")}return o(a,[{key:"addNamespace",value:function(e){if(!e||e.name===this.name)throw new Error("A namespace must not have the same name as the parent namespace");if(!(e instanceof a))throw new Error("addNamespace only accept Namespace instance");this.namespaces.push(e),this[e.name]=e}},{key:"addEndpoint",value:function(e){if(!e||e.name===this.name)throw new Error("A endpoint must not have the same name as a namespace");if(!(e instanceof l))throw new Error("addNamespace only accept Namespace instance");this.endpoints.push(e),this[e.name]=e.build(this.http)}}]),a}()},{"./endpoint":41,debug:29}],44:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var i=e("axios"),a=e("./auth_strategies/strategy"),s=e("../constants"),d=e("debug")("kmjs:network"),l=e("debug")("kmjs:network:http"),f=e("debug")("kmjs:network:ws"),m=e("./utils/websocket"),u=e("eventemitter2"),p=e("async");t.exports=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),d("init network manager"),t.baseURL=t.services.API||"https://api.keymetrics.io",this.opts=t,this.tokens={refresh_token:null,access_token:null},this.km=e,this._queue=[],this._axios=i.create(t),this._websockets=[],this._endpoints=new Map,this.realtime=new u({wildcard:!0,delimiter:":",newListener:!1,maxListeners:20}),this.realtime.subscribe=this.subscribe.bind(this),this.realtime.unsubscribe=this.unsubscribe.bind(this),this.authenticated=!1}return o(n,[{key:"_queueUpdater",value:function(){if(!1!==this.authenticated)for(0<this._queue.length&&d("Emptying requests queue (size: "+this._queue.length+")");0<this._queue.length;){var e=this._queue.shift();this.request(e.request).then(e.resolve,e.reject)}}},{key:"_resolveBucketEndpoint",value:function(t){var n=this;if(!t)return Promise.reject(new Error("Missing argument : bucketID"));if(!this._endpoints.has(t)){var e=this._axios.request({url:"/api/bucket/"+t,method:"GET",headers:{Authorization:"Bearer "+this.tokens.access_token}}).then(function(e){var t=e.data;return("object"===r(t.node)?t.node:t.node_cache).endpoints.web}).catch(function(e){throw n._endpoints.delete(t),e});this._endpoints.set(t,e)}return this._endpoints.get(t)}},{key:"request",value:function(i){var a=this;return new Promise(function(n,o){p.series([function(e){return!0===a.authenticated||!1===i.authentication?e():(l("Queued request to "+i.url),a._queue.push({resolve:n,reject:o,request:i}),e(-1))},function(t){if(!i.url.match(/bucket\/[0-9a-fA-F]{24}/))return t();var e=i.url.split("/")[3];a._resolveBucketEndpoint(e).then(function(e){return i.baseURL=e,t()}).catch(t)},function(o){var r=function(e){return o(null,e)};l("Making request to "+i.url),i.headers||(i.headers={}),i.headers.Authorization="Bearer "+a.tokens.access_token,a._axios.request(i).then(r).catch(function(e){var n=e.response;if(n&&401!==n.status)return o(n);l("Got unautenticated response, buffering request from now ..."),a.authenticated=!1,l("Asking to the oauth flow to retrieve new tokens"),a.oauth_flow.retrieveTokens(a.km,function(e,t){if(e)return l("Failed to retrieve new tokens : "+(e.message||e)),o(n);l("Succesfully retrieved new tokens"),a._updateTokens(null,t,function(e,t){return e?o(n):(l("Re-buffering call to "+i.url+" since authenticated now"),a._axios.request(i).then(r).catch(o))})})})}],function(e,t){if(-1!==e)return e?o(e):n(t[2])})})}},{key:"_updateTokens",value:function(e,t,n){var o=this;if(e)return console.error("Error while retrieving tokens : "+e.message),this.oauth_flow.deleteTokens(this.km),console.error(e.response?e.response.data:e.stack);if(!t||!t.access_token||!t.refresh_token)throw new Error("Invalid tokens");this.tokens=t,l("Registered new access_token : "+t.access_token),this._axios.defaults.headers.common.Authorization="Bearer "+t.access_token,this._axios.request({url:"/api/bucket",method:"GET",headers:{Authorization:"Bearer "+t.access_token}}).then(function(e){return l("Cached "+e.data.length+" buckets for current user"),o.authenticated=!0,o._queueUpdater(),"function"==typeof n?n(null,!0):null}).catch(function(e){return console.error("Error while retrieving buckets"),console.error(e.response?e.response.data:e),"function"==typeof n?n(e):null})}},{key:"useStrategy",value:function(e,t){if(t||(t={}),t.client_id||(t.client_id=this.opts.OAUTH_CLIENT_ID),"object"===(void 0===e?"undefined":r(e))){if(this.oauth_flow=e,!this.oauth_flow.retrieveTokens||!this.oauth_flow.deleteTokens)throw new Error("You must implement the Strategy interface to use it");return this.oauth_flow.retrieveTokens(this.km,this._updateTokens.bind(this))}if(void 0===a.implementations(e))throw new Error("The flow named "+e+" doesn't exist");var n=a.implementations(e);if(n.condition&&s.ENVIRONNEMENT!==n.condition)throw new Error("The flow "+e+" is reserved for "+n.condition+" environment");var o=n.nodule;return this.oauth_flow=new o(t),this.oauth_flow.retrieveTokens(this.km,this._updateTokens.bind(this))}},{key:"subscribe",value:function(p,e){var c=this;return new Promise(function(l,u){d("Request endpoints for "+p),c.km.bucket.retrieve(p).then(function(e){var o=e.data,t=!1,n=o.node.endpoints||o.node_cache.endpoints,r=n.realtime||n.web;r=r.replace("http","ws"),c.opts.IS_DEBUG&&(r=r.replace(":3000",":4020")),f("Found endpoint for "+p+" : "+r);var i=new m(r+"/primus/?token="+c.tokens.access_token);i.connected=!1,i.bucket=p;var a=null,s=function(){if(d("Connected to ws endpoint : "+r+" (bucket: "+p+")"),i.connected=!0,c.realtime.emit(o.public_id+":connected"),i.send(JSON.stringify({action:"active",public_id:o.public_id})),null!==a&&(clearInterval(a),a=null),a=setInterval(function(){i.send("primus::pong::"+Date.now()),i.ping()}.bind(c),5e3),!t)return t=!0,l(i)};i.onmaxreconnect=function(e){if(!t)return t=!0,u(new Error("Connection timeout"))},i.onopen=s,i.onreconnect=s,i.onerror=function(e){f("Error on "+r+" (bucket: "+p+")"),f(e),c.realtime.emit(o.public_id+":error",e)},i.onclose=function(){d("Closing ws connection "+r+" (bucket: "+p+")"),i.connected=!1,c.realtime.emit(o.public_id+":disconnected"),null!==a&&(clearInterval(a),a=null)},i.onmessage=function(e){f("Received message for bucket "+p+" ("+(e.data.length/1e3).toFixed(1)+" Kb)");var t=null;try{t=JSON.parse(e.data)}catch(e){return f("Receive not json message for bucket "+p)}var n=t.data[1];Object.keys(n).forEach(function(e){"server_name"!==e&&c.realtime.emit(o.public_id+":"+(n.server_name||"none")+":"+e,n[e])})},c._websockets.push(i)}).catch(u)})}},{key:"unsubscribe",value:function(o,e){var r=this;return new Promise(function(e,t){d("Unsubscribe from realtime for "+o);var n=r._websockets.find(function(e){return e.bucket===o});return n?(n.close(1e3,"Disconnecting"),d("Succesfully unsubscribed from realtime for "+o),e()):t(new Error("Realtime wasn't connected to "+o))})}}]),n}()},{"../constants":1,"./auth_strategies/strategy":40,"./utils/websocket":46,async:2,axios:3,debug:29,eventemitter2:31}],45:[function(e,t,n){"use strict";var te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"extract",value:function(Y,Z){var ee=function(e){return null!=e};return new Promise(function(e,t){var n={params:{},data:{},url:Y.route.name+"",method:Y.route.type,authentication:Y.authentication||!1};switch(Y.route.type){case"GET":var o=!0,r=!1,i=void 0;try{for(var a,s=(Y.params||[])[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var l=a.value,u=Z.shift();if("string"!=typeof u&&!1===l.optional)return t(new Error("Expected to receive string argument for "+l.name+" to match but got "+u));u?n.url=n.url.replace(l.name,u):!1===l.optional&&null!==l.defaultvalue&&(n.url=n.url.replace(l.name,l.defaultvalue))}}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}var p=!0,c=!1,d=void 0;try{for(var f,m=(Y.query||[])[Symbol.iterator]();!(p=(f=m.next()).done);p=!0){var h=f.value,y=Z.shift();if("string"!=typeof y&&!1===h.optional)return t(new Error("Expected to receive string argument for "+h.name+" query but got "+y));y?n.params[h.name]=y:!1===h.optional&&null!==h.defaultvalue&&(n.params[h.name]=h.defaultvalue)}}catch(e){c=!0,d=e}finally{try{!p&&m.return&&m.return()}finally{if(c)throw d}}break;case"PUT":case"POST":case"PATCH":var v=!0,g=!1,b=void 0;try{for(var k,_=(Y.params||[])[Symbol.iterator]();!(v=(k=_.next()).done);v=!0){var w=k.value,T=Z.shift();if("string"!=typeof T&&!1===w.optional)return t(new Error("Expected to receive string argument for "+w.name+" to match but got "+T));T?n.url=n.url.replace(w.name,T):!1===w.optional&&null!==w.defaultvalue&&(n.url=n.url.replace(w.name,w.defaultvalue))}}catch(e){g=!0,b=e}finally{try{!v&&_.return&&_.return()}finally{if(g)throw b}}var j=!0,A=!1,E=void 0;try{for(var S,x=(Y.query||[])[Symbol.iterator]();!(j=(S=x.next()).done);j=!0){var O=S.value,P=Z.shift();if("string"!=typeof P&&!1===O.optional)return t(new Error("Expected to receive string argument for "+O.name+" query but got "+P));P?n.params[O.name]=P:!1===O.optional&&null!==O.defaultvalue&&(n.params[O.name]=O.defaultvalue)}}catch(e){A=!0,E=e}finally{try{!j&&x.return&&x.return()}finally{if(A)throw E}}if(0===Z.length)break;var L=Z[0];if("object"!==(void 0===L?"undefined":te(L))&&0<Y.body.length)return t(new Error("Expected to receive an object for post data but received "+(void 0===L?"undefined":te(L))));var C=!0,z=!1,U=void 0;try{for(var D,I=(Y.body||[])[Symbol.iterator]();!(C=(D=I.next()).done);C=!0){var R=D.value;if(!ee(L[R.name])&&!1===R.optional&&null===R.defaultvalue)return t(new Error("Missing mandatory field "+R.name+" to make a POST request on "+Y.route.name));if(te(L[R.name])!==R.type&&!1===R.optional&&null===R.defaultvalue)return t(new Error("Invalid type for field "+R.name+", expected "+R.type+" but got "+te(L[R.name])));ee(L[R.name])&&(n.data[R.name]=L[R.name]),!1===R.optional&&null!==R.defaultvalue&&(n.data[R.name]=R.defaultvalue)}}catch(e){z=!0,U=e}finally{try{!C&&I.return&&I.return()}finally{if(z)throw U}}break;case"DELETE":var B=!0,N=!1,q=void 0;try{for(var M,F=(Y.params||[])[Symbol.iterator]();!(B=(M=F.next()).done);B=!0){var G=M.value,H=Z.shift();if("string"!=typeof H&&!1===G.optional)return t(new Error("Expected to receive string argument for "+G.name+" to match but got "+H));H?n.url=n.url.replace(G.name,H):!1===G.optional&&null!==G.defaultvalue&&(n.url=n.url.replace(G.name,G.defaultvalue))}}catch(e){N=!0,q=e}finally{try{!B&&F.return&&F.return()}finally{if(N)throw q}}var V=!0,W=!1,X=void 0;try{for(var Q,K=(Y.query||[])[Symbol.iterator]();!(V=(Q=K.next()).done);V=!0){var $=Q.value,J=Z.shift();if("string"!=typeof J&&!1===$.optional)return t(new Error("Expected to receive string argument for "+$.name+" query but got "+J));J?n.params[$.name]=J:!1===$.optional&&null!==$.defaultvalue&&(n.params[$.name]=$.defaultvalue)}}catch(e){W=!0,X=e}finally{try{!V&&K.return&&K.return()}finally{if(W)throw X}}break;default:return t(new Error("Invalid endpoint declaration, invalid method "+Y.route.type+" found"))}return e(n)})}}]),e}()},{}],46:[function(e,t,n){"use strict";var o=e("ws"),r=e("debug")("kmjs:network:_ws"),i="function"!=typeof o?WebSocket:o,a={debug:!1,automaticOpen:!0,reconnectOnError:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1,timeoutInterval:2e3,maxReconnectAttempts:5,randomRatio:3,reconnectOnCleanClose:!1},s=function(e,t,n){t||(t=[]),n||(n=[]),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this._url=e,this._protocols=t,this._options=Object.assign({},a,n),this._messageQueue=[],this._reconnectAttempts=0,this.readyState=this.CONNECTING,"function"==typeof this._options.debug?this._debug=this._options.debug:this._options.debug?this._debug=console.log.bind(console):this._debug=function(){},this._options.automaticOpen&&this.open()};s.prototype.open=function(){r("open");var e=this._socket=new i(this._url,this._protocols);if(this._options.binaryType&&(e.binaryType=this._options.binaryType),this._options.maxReconnectAttempts&&this._options.maxReconnectAttempts<this._reconnectAttempts)return this.onmaxreconnect();this._syncState(),e.onmessage=this._onmessage.bind(this),e.onopen=this._onopen.bind(this),e.onclose=this._onclose.bind(this),e.onerror=this._onerror.bind(this)},s.prototype.send=function(e){r("send"),this._socket&&this._socket.readyState===i.OPEN&&0===this._messageQueue.length?this._socket.send(e):this._messageQueue.push(e)},s.prototype.ping=function(){r("ping"),this._socket.ping&&this._socket&&this._socket.readyState===i.OPEN&&0===this._messageQueue.length&&this._socket.ping()},s.prototype.close=function(e,t){r("close"),void 0===e&&(e=1e3),this._socket&&this._socket.close(e,t)},s.prototype._onmessage=function(e){r("onmessage"),this.onmessage&&this.onmessage(e)},s.prototype._onopen=function(e){r("onopen"),this._syncState(),this._flushQueue(),0!==this._reconnectAttempts&&this.onreconnect&&this.onreconnect(),this._reconnectAttempts=0,this.onopen&&this.onopen(e)},s.prototype._onclose=function(e){r("onclose",e),this._syncState(),this._debug("WebSocket: connection is broken",e),this.onclose&&this.onclose(e),this._tryReconnect(e)},s.prototype._onerror=function(e){r("onerror",e),this._socket.close(),this._syncState(),this._debug("WebSocket: error",e),this.onerror&&this.onerror(e),this._options.reconnectOnError&&this._tryReconnect(e)},s.prototype._tryReconnect=function(e){var t=this;r("Trying to reconnect"),e.wasClean&&!this._options.reconnectOnCleanClose||setTimeout(function(){t.readyState!==t.CLOSING&&t.readyState!==t.CLOSED||(t._reconnectAttempts++,t.open())},this._getTimeout())},s.prototype._flushQueue=function(){for(;0!==this._messageQueue.length;){var e=this._messageQueue.shift();this._socket.send(e)}},s.prototype._getTimeout=function(){var e,t,n=this._options.reconnectInterval*Math.pow(this._options.reconnectDecay,this._reconnectAttempts);return n=n>this._options.maxReconnectInterval?this._options.maxReconnectInterval:n,console.log(n),this._options.randomRatio?(e=n/this._options.randomRatio,t=n,Math.random()*(t-e)+e):n},s.prototype._syncState=function(){this.readyState=this._socket.readyState},t.exports=s},{debug:29,ws:28}],"/":[function(e,t,n){"use strict";t.exports=e("./src/keymetrics.js")},{"./src/keymetrics.js":42}]},{},[])("/")});
